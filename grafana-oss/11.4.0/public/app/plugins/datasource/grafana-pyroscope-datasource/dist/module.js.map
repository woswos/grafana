{"version":3,"file":"module.js","mappings":"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","sources":["webpack://grafana-pyroscope-datasource/../../../../../node_modules/fast-deep-equal/index.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/react/cjs/react-jsx-runtime.production.min.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/react/jsx-runtime.js","webpack://grafana-pyroscope-datasource/external amd \"@emotion/css\"","webpack://grafana-pyroscope-datasource/external amd \"@grafana/data\"","webpack://grafana-pyroscope-datasource/external amd \"@grafana/runtime\"","webpack://grafana-pyroscope-datasource/external amd \"@grafana/ui\"","webpack://grafana-pyroscope-datasource/external amd \"lodash\"","webpack://grafana-pyroscope-datasource/external amd \"prismjs\"","webpack://grafana-pyroscope-datasource/external amd \"react\"","webpack://grafana-pyroscope-datasource/external amd \"rxjs\"","webpack://grafana-pyroscope-datasource/webpack/bootstrap","webpack://grafana-pyroscope-datasource/webpack/runtime/compat get default export","webpack://grafana-pyroscope-datasource/webpack/runtime/define property getters","webpack://grafana-pyroscope-datasource/webpack/runtime/hasOwnProperty shorthand","webpack://grafana-pyroscope-datasource/webpack/runtime/make namespace object","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/DataSourceDescription.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/ConfigSection/GenericConfigSection.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/ConfigSection/ConfigSection.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Connection/ConnectionSettings.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Auth/styles.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Auth/auth-method/BasicAuth.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/ConfigSection/ConfigSubSection.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Auth/types.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Auth/auth-method/AuthMethodSettings.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Auth/tls/TLSSettingsSection.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Auth/tls/SelfSignedCertificate.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Auth/tls/TLSClientAuth.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Auth/tls/SkipTLSVerification.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Auth/tls/TLSSettings.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Auth/custom-headers/CustomHeader.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Auth/custom-headers/CustomHeaders.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Auth/Auth.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/Auth/utils.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/AdvancedSettings/AdvancedHttpSettings.js","webpack://grafana-pyroscope-datasource/./ConfigEditor.tsx","webpack://grafana-pyroscope-datasource/./QueryEditor/ProfileTypesCascader.tsx","webpack://grafana-pyroscope-datasource/./VariableQueryEditor.tsx","webpack://grafana-pyroscope-datasource/./VariableSupport.ts","webpack://grafana-pyroscope-datasource/./utils.ts","webpack://grafana-pyroscope-datasource/./datasource.ts","webpack://grafana-pyroscope-datasource/./dataquery.gen.ts","webpack://grafana-pyroscope-datasource/./QueryEditor/Stack.tsx","webpack://grafana-pyroscope-datasource/./QueryEditor/EditorRow.tsx","webpack://grafana-pyroscope-datasource/./QueryEditor/EditorRows.tsx","webpack://grafana-pyroscope-datasource/../../../../../node_modules/tslib/tslib.es6.mjs","webpack://grafana-pyroscope-datasource/./pyroscopeql/pyroscopeql.ts","webpack://grafana-pyroscope-datasource/./pyroscopeql/index.ts","webpack://grafana-pyroscope-datasource/./QueryEditor/autocomplete.ts","webpack://grafana-pyroscope-datasource/./QueryEditor/LabelsEditor.tsx","webpack://grafana-pyroscope-datasource/../../../../../node_modules/react-use/esm/useAsync.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/react-use/esm/useAsyncFn.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/react-use/esm/useMountedState.js","webpack://grafana-pyroscope-datasource/../../../../../node_modules/react-use/esm/useLatest.js","webpack://grafana-pyroscope-datasource/./QueryEditor/EditorField.tsx","webpack://grafana-pyroscope-datasource/../../../../../node_modules/react-use/esm/useToggle.js","webpack://grafana-pyroscope-datasource/./QueryEditor/QueryOptionGroup.tsx","webpack://grafana-pyroscope-datasource/./QueryEditor/QueryOptions.tsx","webpack://grafana-pyroscope-datasource/./QueryEditor/QueryEditor.tsx","webpack://grafana-pyroscope-datasource/./module.ts"],"sourcesContent":["'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__89__;","module.exports = __WEBPACK_EXTERNAL_MODULE__781__;","module.exports = __WEBPACK_EXTERNAL_MODULE__531__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","module.exports = __WEBPACK_EXTERNAL_MODULE__241__;","module.exports = __WEBPACK_EXTERNAL_MODULE__146__;","module.exports = __WEBPACK_EXTERNAL_MODULE__959__;","module.exports = __WEBPACK_EXTERNAL_MODULE__269__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React from 'react';\nimport { css, cx } from '@emotion/css';\nimport { useTheme2 } from '@grafana/ui';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst DataSourceDescription = ({ dataSourceName, docsLink, hasRequiredFields = true, className }) => {\n  const theme = useTheme2();\n  const styles = {\n    container: css({\n      p: {\n        margin: 0\n      },\n      \"p + p\": {\n        marginTop: theme.spacing(2)\n      }\n    }),\n    text: css(__spreadProps(__spreadValues({}, theme.typography.body), {\n      color: theme.colors.text.secondary,\n      a: css({\n        color: theme.colors.text.link,\n        textDecoration: \"underline\",\n        \"&:hover\": {\n          textDecoration: \"none\"\n        }\n      })\n    }))\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: cx(styles.container, className) }, /* @__PURE__ */ React.createElement(\"p\", { className: styles.text }, \"Before you can use the \", dataSourceName, \" data source, you must configure it below or in the config file. For detailed instructions,\", \" \", /* @__PURE__ */ React.createElement(\"a\", { href: docsLink, target: \"_blank\", rel: \"noreferrer\" }, \"view the documentation\"), \".\"), hasRequiredFields && /* @__PURE__ */ React.createElement(\"p\", { className: styles.text }, /* @__PURE__ */ React.createElement(\"i\", null, \"Fields marked with * are required\")));\n};\n\nexport { DataSourceDescription };\n//# sourceMappingURL=DataSourceDescription.js.map\n","import React, { useState } from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, IconButton } from '@grafana/ui';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst GenericConfigSection = ({\n  children,\n  title,\n  description,\n  isCollapsible = false,\n  isInitiallyOpen = true,\n  kind = \"section\",\n  className\n}) => {\n  const { colors, typography, spacing } = useTheme2();\n  const [isOpen, setIsOpen] = useState(isCollapsible ? isInitiallyOpen : true);\n  const iconName = isOpen ? \"angle-up\" : \"angle-down\";\n  const isSubSection = kind === \"sub-section\";\n  const collapsibleButtonAriaLabel = `${isOpen ? \"Collapse\" : \"Expand\"} section ${title}`;\n  const styles = {\n    header: css({\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\"\n    }),\n    title: css({\n      margin: 0\n    }),\n    subtitle: css({\n      margin: 0,\n      fontWeight: typography.fontWeightRegular\n    }),\n    descriptionText: css(__spreadProps(__spreadValues({\n      marginTop: spacing(isSubSection ? 0.25 : 0.5),\n      marginBottom: 0\n    }, typography.bodySmall), {\n      color: colors.text.secondary\n    })),\n    content: css({\n      marginTop: spacing(2)\n    })\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className }, /* @__PURE__ */ React.createElement(\"div\", { className: styles.header }, kind === \"section\" ? /* @__PURE__ */ React.createElement(\"h3\", { className: styles.title }, title) : /* @__PURE__ */ React.createElement(\"h6\", { className: styles.subtitle }, title), isCollapsible && /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      name: iconName,\n      onClick: () => setIsOpen(!isOpen),\n      type: \"button\",\n      size: \"xl\",\n      \"aria-label\": collapsibleButtonAriaLabel\n    }\n  )), description && /* @__PURE__ */ React.createElement(\"p\", { className: styles.descriptionText }, description), isOpen && /* @__PURE__ */ React.createElement(\"div\", { className: styles.content }, children));\n};\n\nexport { GenericConfigSection };\n//# sourceMappingURL=GenericConfigSection.js.map\n","import React from 'react';\nimport { GenericConfigSection } from './GenericConfigSection.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nconst ConfigSection = (_a) => {\n  var _b = _a, { children } = _b, props = __objRest(_b, [\"children\"]);\n  return /* @__PURE__ */ React.createElement(GenericConfigSection, __spreadProps(__spreadValues({}, props), { kind: \"section\" }), children);\n};\n\nexport { ConfigSection };\n//# sourceMappingURL=ConfigSection.js.map\n","import React from 'react';\nimport { css, cx } from '@emotion/css';\nimport { InlineField, Input } from '@grafana/ui';\nimport { ConfigSection } from '../ConfigSection/ConfigSection.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst ConnectionSettings = ({\n  config,\n  onChange,\n  description,\n  urlPlaceholder,\n  urlTooltip,\n  urlLabel,\n  className\n}) => {\n  const isValidUrl = /^(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?$/.test(\n    config.url\n  );\n  const styles = {\n    container: css({\n      maxWidth: 578\n    })\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ConfigSection, { title: \"Connection\", description, className: cx(styles.container, className) }, /* @__PURE__ */ React.createElement(\n    InlineField,\n    {\n      htmlFor: \"connection-url\",\n      label: urlLabel || \"URL\",\n      labelWidth: 24,\n      tooltip: urlTooltip || /* @__PURE__ */ React.createElement(React.Fragment, null, \"Specify a complete HTTP URL\", /* @__PURE__ */ React.createElement(\"br\", null), \"(for example https://example.com:8080)\"),\n      grow: true,\n      disabled: config.readOnly,\n      required: true,\n      invalid: !isValidUrl && !config.readOnly,\n      error: isValidUrl ? \"\" : \"Please enter a valid URL\",\n      interactive: true\n    },\n    /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"connection-url\",\n        \"aria-label\": \"Data source connection URL\",\n        onChange: (event) => onChange(__spreadProps(__spreadValues({}, config), {\n          url: event.currentTarget.value\n        })),\n        value: config.url || \"\",\n        placeholder: urlPlaceholder || \"URL\"\n      }\n    )\n  )));\n};\n\nexport { ConnectionSettings };\n//# sourceMappingURL=ConnectionSettings.js.map\n","import { css } from '@emotion/css';\n\nconst useCommonStyles = () => {\n  return {\n    inlineFieldNoMarginRight: css({\n      marginRight: 0\n    }),\n    // This is dirty hack to make configured secret input grow\n    inlineFieldWithSecret: css({\n      '[class$=\"layoutChildrenWrapper\"]:first-child': {\n        flexGrow: 1\n      }\n    })\n  };\n};\n\nexport { useCommonStyles };\n//# sourceMappingURL=styles.js.map\n","import React from 'react';\nimport { css, cx } from '@emotion/css';\nimport { InlineField, Input, SecretInput } from '@grafana/ui';\nimport { useCommonStyles } from '../styles.js';\n\nconst BasicAuth = ({\n  user,\n  passwordConfigured,\n  userLabel = \"User\",\n  userTooltip = \"The username of the data source account\",\n  userPlaceholder = \"User\",\n  passwordLabel = \"Password\",\n  passwordTooltip = \"The password of the data source account\",\n  passwordPlaceholder = \"Password\",\n  onUserChange,\n  onPasswordChange,\n  onPasswordReset,\n  readOnly\n}) => {\n  const commonStyles = useCommonStyles();\n  const styles = {\n    lastInlineField: css({\n      marginBottom: 0\n    })\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    InlineField,\n    {\n      className: commonStyles.inlineFieldNoMarginRight,\n      label: userLabel,\n      labelWidth: 24,\n      tooltip: userTooltip,\n      required: true,\n      htmlFor: \"basic-auth-user-input\",\n      interactive: true,\n      grow: true,\n      disabled: readOnly\n    },\n    /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"basic-auth-user-input\",\n        placeholder: userPlaceholder,\n        value: user,\n        onChange: (e) => onUserChange(e.currentTarget.value),\n        required: true\n      }\n    )\n  ), /* @__PURE__ */ React.createElement(\n    InlineField,\n    {\n      className: cx(\n        commonStyles.inlineFieldNoMarginRight,\n        commonStyles.inlineFieldWithSecret,\n        styles.lastInlineField\n      ),\n      label: passwordLabel,\n      labelWidth: 24,\n      tooltip: passwordTooltip,\n      required: true,\n      htmlFor: \"basic-auth-password-input\",\n      interactive: true,\n      grow: true,\n      disabled: readOnly\n    },\n    /* @__PURE__ */ React.createElement(\n      SecretInput,\n      {\n        id: \"basic-auth-password-input\",\n        isConfigured: passwordConfigured,\n        onReset: readOnly ? () => {\n        } : onPasswordReset,\n        placeholder: passwordPlaceholder,\n        onChange: (e) => onPasswordChange(e.currentTarget.value),\n        required: true\n      }\n    )\n  ));\n};\n\nexport { BasicAuth };\n//# sourceMappingURL=BasicAuth.js.map\n","import React from 'react';\nimport { GenericConfigSection } from './GenericConfigSection.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nconst ConfigSubSection = (_a) => {\n  var _b = _a, { children } = _b, props = __objRest(_b, [\"children\"]);\n  return /* @__PURE__ */ React.createElement(GenericConfigSection, __spreadProps(__spreadValues({}, props), { kind: \"sub-section\" }), children);\n};\n\nexport { ConfigSubSection };\n//# sourceMappingURL=ConfigSubSection.js.map\n","var AuthMethod = /* @__PURE__ */ ((AuthMethod2) => {\n  AuthMethod2[\"NoAuth\"] = \"NoAuth\";\n  AuthMethod2[\"BasicAuth\"] = \"BasicAuth\";\n  AuthMethod2[\"OAuthForward\"] = \"OAuthForward\";\n  AuthMethod2[\"CrossSiteCredentials\"] = \"CrossSiteCredentials\";\n  return AuthMethod2;\n})(AuthMethod || {});\n\nexport { AuthMethod };\n//# sourceMappingURL=types.js.map\n","import React, { useState, useMemo } from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Select } from '@grafana/ui';\nimport { BasicAuth } from './BasicAuth.js';\nimport { ConfigSubSection } from '../../ConfigSection/ConfigSubSection.js';\nimport { AuthMethod } from '../types.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst defaultOptions = {\n  [AuthMethod.BasicAuth]: {\n    label: \"Basic authentication\",\n    value: AuthMethod.BasicAuth,\n    description: \"Authenticate with your data source username and password\"\n  },\n  [AuthMethod.CrossSiteCredentials]: {\n    label: \"Enable cross-site access control requests\",\n    value: AuthMethod.CrossSiteCredentials,\n    description: \"Allow cross-site Access-Control requests with your existing credentials and cookies. This enables the server to authenticate the user and perform authorized requests on their behalf on other domains.\"\n  },\n  [AuthMethod.OAuthForward]: {\n    label: \"Forward OAuth Identity\",\n    value: AuthMethod.OAuthForward,\n    description: \"Forward the OAuth access token (and if available: the OIDC ID token) of the user querying to the data source\"\n  },\n  [AuthMethod.NoAuth]: {\n    label: \"No Authentication\",\n    value: AuthMethod.NoAuth,\n    description: \"Data source is available without authentication\"\n  }\n};\nconst AuthMethodSettings = ({\n  selectedMethod,\n  mostCommonMethod,\n  visibleMethods: visibleMethodsFromProps,\n  defaultOptionsOverrides,\n  customMethods,\n  onAuthMethodSelect,\n  basicAuth,\n  readOnly\n}) => {\n  var _a, _b, _c, _d;\n  const [authMethodChanged, setAuthMethodChanged] = useState(false);\n  const { colors, spacing } = useTheme2();\n  const visibleMethods = useMemo(\n    () => {\n      var _a2;\n      return visibleMethodsFromProps != null ? visibleMethodsFromProps : [\n        AuthMethod.BasicAuth,\n        AuthMethod.OAuthForward,\n        AuthMethod.NoAuth,\n        ...(_a2 = customMethods == null ? void 0 : customMethods.map((m) => m.id)) != null ? _a2 : []\n      ];\n    },\n    [customMethods, visibleMethodsFromProps]\n  );\n  const hasSelect = visibleMethods.length > 1;\n  const preparedOptions = useMemo(() => {\n    var _a2;\n    const customOptions = (_a2 = customMethods == null ? void 0 : customMethods.reduce((acc, method) => {\n      acc[method.id] = {\n        label: method.label,\n        value: method.id,\n        description: method.description\n      };\n      return acc;\n    }, {})) != null ? _a2 : {};\n    const preparedDefaultOptions = {};\n    let k;\n    for (k in defaultOptions) {\n      preparedDefaultOptions[k] = __spreadValues(__spreadValues({}, defaultOptions[k]), defaultOptionsOverrides == null ? void 0 : defaultOptionsOverrides[k]);\n    }\n    const allOptions = __spreadValues(__spreadValues({}, customOptions), preparedDefaultOptions);\n    return visibleMethods.filter((method) => Boolean(allOptions[method])).map((method) => {\n      const option = allOptions[method];\n      if (method === mostCommonMethod && hasSelect) {\n        return __spreadProps(__spreadValues({}, option), {\n          label: `${option.label} (most common)`\n        });\n      }\n      return option;\n    });\n  }, [visibleMethods, customMethods, defaultOptionsOverrides, mostCommonMethod, hasSelect]);\n  let selected = selectedMethod;\n  if (!hasSelect) {\n    selected = visibleMethods[0];\n  } else if (selectedMethod === AuthMethod.NoAuth && mostCommonMethod && !authMethodChanged) {\n    selected = mostCommonMethod;\n  }\n  let AuthFieldsComponent = null;\n  if (selected === AuthMethod.BasicAuth && basicAuth) {\n    AuthFieldsComponent = /* @__PURE__ */ React.createElement(BasicAuth, __spreadProps(__spreadValues({}, basicAuth), { readOnly }));\n  } else if (selected.startsWith(\"custom-\")) {\n    AuthFieldsComponent = (_b = (_a = customMethods == null ? void 0 : customMethods.find((m) => m.id === selected)) == null ? void 0 : _a.component) != null ? _b : null;\n  }\n  const title = hasSelect ? \"Authentication methods\" : (_c = preparedOptions[0].label) != null ? _c : \"\";\n  const description = hasSelect ? \"Choose an authentication method to access the data source\" : (_d = preparedOptions[0].description) != null ? _d : \"\";\n  const styles = {\n    authMethods: css(__spreadValues({\n      marginTop: spacing(2.5)\n    }, hasSelect && {\n      padding: spacing(2),\n      border: `1px solid ${colors.border.weak}`\n    })),\n    selectedMethodFields: css({\n      marginTop: spacing(1.5)\n    })\n  };\n  return /* @__PURE__ */ React.createElement(ConfigSubSection, { title, description }, /* @__PURE__ */ React.createElement(\"div\", { className: styles.authMethods }, hasSelect && /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      options: preparedOptions,\n      value: selected,\n      onChange: (option) => {\n        setAuthMethodChanged(true);\n        onAuthMethodSelect(option.value);\n      },\n      disabled: readOnly\n    }\n  ), AuthFieldsComponent && /* @__PURE__ */ React.createElement(\"div\", { className: styles.selectedMethodFields }, AuthFieldsComponent)));\n};\n\nexport { AuthMethodSettings };\n//# sourceMappingURL=AuthMethodSettings.js.map\n","import React from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Checkbox, Tooltip, Icon } from '@grafana/ui';\n\nconst TLSSettingsSection = ({ children, enabled, label, tooltipText, onToggle, readOnly }) => {\n  const { colors, spacing } = useTheme2();\n  const styles = {\n    container: css({\n      marginTop: 3\n    }),\n    checkboxContainer: css({\n      display: \"flex\",\n      alignItems: \"center\"\n    }),\n    infoIcon: css({\n      marginTop: -2,\n      marginLeft: 5,\n      color: colors.text.secondary\n    }),\n    content: css({\n      margin: spacing(1, 0, 2, 3)\n    })\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.container }, /* @__PURE__ */ React.createElement(\"div\", { className: styles.checkboxContainer }, /* @__PURE__ */ React.createElement(Checkbox, { value: enabled, label, onChange: () => onToggle(!enabled), disabled: readOnly }), /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", content: tooltipText, interactive: true }, /* @__PURE__ */ React.createElement(Icon, { name: \"info-circle\", className: styles.infoIcon, size: \"sm\" }))), enabled && children && /* @__PURE__ */ React.createElement(\"div\", { className: styles.content }, children));\n};\n\nexport { TLSSettingsSection };\n//# sourceMappingURL=TLSSettingsSection.js.map\n","import React from 'react';\nimport { cx } from '@emotion/css';\nimport { InlineField, SecretTextArea } from '@grafana/ui';\nimport { TLSSettingsSection } from './TLSSettingsSection.js';\nimport { useCommonStyles } from '../styles.js';\n\nconst SelfSignedCertificate = ({\n  enabled,\n  certificateConfigured,\n  onToggle,\n  onCertificateChange,\n  onCertificateReset,\n  tooltips,\n  readOnly\n}) => {\n  var _a;\n  const commonStyles = useCommonStyles();\n  return /* @__PURE__ */ React.createElement(\n    TLSSettingsSection,\n    {\n      enabled,\n      label: \"Add self-signed certificate\",\n      tooltipText: \"Add your own Certificate Authority (CA) certificate on top of one generated by the certificate authorities for additional security measures\",\n      onToggle: (newEnabled) => onToggle(newEnabled),\n      readOnly\n    },\n    /* @__PURE__ */ React.createElement(\n      InlineField,\n      {\n        label: \"CA Certificate\",\n        labelWidth: 24,\n        tooltip: (_a = tooltips == null ? void 0 : tooltips.certificateLabel) != null ? _a : \"Your self-signed certificate\",\n        required: true,\n        htmlFor: \"self-signed-certificate-input\",\n        interactive: true,\n        grow: true,\n        className: cx(commonStyles.inlineFieldNoMarginRight, commonStyles.inlineFieldWithSecret),\n        disabled: readOnly\n      },\n      /* @__PURE__ */ React.createElement(\n        SecretTextArea,\n        {\n          id: \"self-signed-certificate-input\",\n          isConfigured: certificateConfigured,\n          onChange: (e) => onCertificateChange(e.currentTarget.value),\n          onReset: readOnly ? () => {\n          } : onCertificateReset,\n          placeholder: \"Begins with --- BEGIN CERTIFICATE ---\",\n          rows: 6,\n          required: true\n        }\n      )\n    )\n  );\n};\n\nexport { SelfSignedCertificate };\n//# sourceMappingURL=SelfSignedCertificate.js.map\n","import React from 'react';\nimport { cx } from '@emotion/css';\nimport { InlineField, Input, SecretTextArea } from '@grafana/ui';\nimport { TLSSettingsSection } from './TLSSettingsSection.js';\nimport { useCommonStyles } from '../styles.js';\n\nconst TLSClientAuth = ({\n  enabled,\n  serverName,\n  clientCertificateConfigured,\n  clientKeyConfigured,\n  onToggle,\n  onServerNameChange,\n  onClientCertificateChange,\n  onClientKeyChange,\n  onClientCertificateReset,\n  onClientKeyReset,\n  tooltips,\n  readOnly\n}) => {\n  var _a, _b, _c;\n  const commonStyles = useCommonStyles();\n  return /* @__PURE__ */ React.createElement(\n    TLSSettingsSection,\n    {\n      enabled,\n      label: \"TLS Client Authentication\",\n      tooltipText: \"Validate using TLS client authentication, in which the server authenticates the client\",\n      onToggle: (newEnabled) => onToggle(newEnabled),\n      readOnly\n    },\n    /* @__PURE__ */ React.createElement(\n      InlineField,\n      {\n        label: \"ServerName\",\n        labelWidth: 24,\n        tooltip: (_a = tooltips == null ? void 0 : tooltips.serverNameLabel) != null ? _a : \"A Servername is used to verify the hostname on the returned certificate\",\n        required: true,\n        htmlFor: \"client-auth-servername-input\",\n        interactive: true,\n        grow: true,\n        className: commonStyles.inlineFieldNoMarginRight,\n        disabled: readOnly\n      },\n      /* @__PURE__ */ React.createElement(\n        Input,\n        {\n          id: \"client-auth-servername-input\",\n          placeholder: \"domain.example.com\",\n          value: serverName,\n          onChange: (e) => onServerNameChange(e.currentTarget.value),\n          required: true\n        }\n      )\n    ),\n    /* @__PURE__ */ React.createElement(\n      InlineField,\n      {\n        label: \"Client Certificate\",\n        labelWidth: 24,\n        tooltip: (_b = tooltips == null ? void 0 : tooltips.certificateLabel) != null ? _b : \"The client certificate can be generated from a Certificate Authority or be self-signed\",\n        required: true,\n        htmlFor: \"client-auth-client-certificate-input\",\n        interactive: true,\n        grow: true,\n        className: cx(commonStyles.inlineFieldNoMarginRight, commonStyles.inlineFieldWithSecret),\n        disabled: readOnly\n      },\n      /* @__PURE__ */ React.createElement(\n        SecretTextArea,\n        {\n          id: \"client-auth-client-certificate-input\",\n          isConfigured: clientCertificateConfigured,\n          onChange: (e) => onClientCertificateChange(e.currentTarget.value),\n          onReset: readOnly ? () => {\n          } : onClientCertificateReset,\n          placeholder: \"Begins with --- BEGIN CERTIFICATE ---\",\n          rows: 6,\n          required: true\n        }\n      )\n    ),\n    /* @__PURE__ */ React.createElement(\n      InlineField,\n      {\n        label: \"Client Key\",\n        labelWidth: 24,\n        tooltip: (_c = tooltips == null ? void 0 : tooltips.keyLabel) != null ? _c : \"The client key can be generated from a Certificate Authority or be self-signed\",\n        required: true,\n        htmlFor: \"client-auth-client-key-input\",\n        interactive: true,\n        grow: true,\n        className: cx(commonStyles.inlineFieldNoMarginRight, commonStyles.inlineFieldWithSecret),\n        disabled: readOnly\n      },\n      /* @__PURE__ */ React.createElement(\n        SecretTextArea,\n        {\n          id: \"client-auth-client-key-input\",\n          isConfigured: clientKeyConfigured,\n          onChange: (e) => onClientKeyChange(e.currentTarget.value),\n          onReset: readOnly ? () => {\n          } : onClientKeyReset,\n          placeholder: `Begins with --- RSA PRIVATE KEY CERTIFICATE ---`,\n          rows: 6,\n          required: true\n        }\n      )\n    )\n  );\n};\n\nexport { TLSClientAuth };\n//# sourceMappingURL=TLSClientAuth.js.map\n","import React from 'react';\nimport { TLSSettingsSection } from './TLSSettingsSection.js';\n\nconst SkipTLSVerification = ({ enabled, onToggle, readOnly }) => {\n  return /* @__PURE__ */ React.createElement(\n    TLSSettingsSection,\n    {\n      enabled,\n      label: \"Skip TLS certificate validation\",\n      tooltipText: \"Skipping TLS certificate validation is not recommended unless absolutely necessary or for testing\",\n      onToggle: (newEnabled) => onToggle(newEnabled),\n      readOnly\n    }\n  );\n};\n\nexport { SkipTLSVerification };\n//# sourceMappingURL=SkipTLSVerification.js.map\n","import React from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2 } from '@grafana/ui';\nimport { SelfSignedCertificate } from './SelfSignedCertificate.js';\nimport { TLSClientAuth } from './TLSClientAuth.js';\nimport { SkipTLSVerification } from './SkipTLSVerification.js';\nimport { ConfigSubSection } from '../../ConfigSection/ConfigSubSection.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst TLSSettings = ({\n  selfSignedCertificate,\n  TLSClientAuth: TLSClientAuth$1,\n  skipTLSVerification,\n  readOnly\n}) => {\n  const { spacing } = useTheme2();\n  const styles = {\n    container: css({\n      marginTop: spacing(3)\n    })\n  };\n  return /* @__PURE__ */ React.createElement(\n    ConfigSubSection,\n    {\n      className: styles.container,\n      title: \"TLS settings\",\n      description: \"Additional security measures that can be applied on top of authentication\"\n    },\n    /* @__PURE__ */ React.createElement(SelfSignedCertificate, __spreadProps(__spreadValues({}, selfSignedCertificate), { readOnly })),\n    /* @__PURE__ */ React.createElement(TLSClientAuth, __spreadProps(__spreadValues({}, TLSClientAuth$1), { readOnly })),\n    /* @__PURE__ */ React.createElement(SkipTLSVerification, __spreadProps(__spreadValues({}, skipTLSVerification), { readOnly }))\n  );\n};\n\nexport { TLSSettings };\n//# sourceMappingURL=TLSSettings.js.map\n","import React from 'react';\nimport { css, cx } from '@emotion/css';\nimport { useTheme2, InlineFieldRow, InlineField, Input, SecretInput, IconButton } from '@grafana/ui';\nimport { useCommonStyles } from '../styles.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst CustomHeader = ({ header, onChange, onBlur, onDelete, readOnly }) => {\n  const { spacing } = useTheme2();\n  const commonStyles = useCommonStyles();\n  const styles = {\n    container: css({\n      alignItems: \"center\"\n    }),\n    input: css({\n      minWidth: \"100%\"\n    }),\n    headerNameField: css({\n      width: \"40%\",\n      marginRight: 0,\n      paddingRight: spacing(1)\n    }),\n    headerValueField: css({\n      width: \"45%\",\n      marginRight: 0\n    }),\n    removeHeaderBtn: css({\n      margin: `0 0 3px 10px`\n    })\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InlineFieldRow, { className: styles.container }, /* @__PURE__ */ React.createElement(\n    InlineField,\n    {\n      label: \"Header\",\n      labelWidth: 9,\n      grow: true,\n      className: styles.headerNameField,\n      htmlFor: `custom-header-${header.id}-name-input`,\n      disabled: readOnly\n    },\n    /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: `custom-header-${header.id}-name-input`,\n        placeholder: \"X-Custom-Header\",\n        value: header.name,\n        width: 12,\n        onChange: (e) => onChange(__spreadProps(__spreadValues({}, header), { name: e.currentTarget.value })),\n        onBlur,\n        className: styles.input\n      }\n    )\n  ), /* @__PURE__ */ React.createElement(\n    InlineField,\n    {\n      label: \"Value\",\n      labelWidth: 9,\n      grow: true,\n      className: cx(commonStyles.inlineFieldWithSecret, styles.headerValueField),\n      htmlFor: `custom-header-${header.id}-value-input`,\n      disabled: readOnly\n    },\n    /* @__PURE__ */ React.createElement(\n      SecretInput,\n      {\n        id: `custom-header-${header.id}-value-input`,\n        isConfigured: header.configured,\n        placeholder: \"Header value\",\n        value: header.value,\n        width: 12,\n        onChange: (e) => onChange(__spreadProps(__spreadValues({}, header), { value: e.currentTarget.value })),\n        onReset: readOnly ? () => {\n        } : () => onChange(__spreadProps(__spreadValues({}, header), { configured: false, value: \"\" })),\n        onBlur,\n        className: styles.input\n      }\n    )\n  ), /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      name: \"trash-alt\",\n      tooltip: \"Remove header\",\n      tooltipPlacement: \"top\",\n      className: styles.removeHeaderBtn,\n      onClick: onDelete,\n      type: \"button\",\n      disabled: readOnly\n    }\n  )));\n};\n\nexport { CustomHeader };\n//# sourceMappingURL=CustomHeader.js.map\n","import React, { useState, useEffect } from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, Button } from '@grafana/ui';\nimport { CustomHeader } from './CustomHeader.js';\nimport { ConfigSubSection } from '../../ConfigSection/ConfigSubSection.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst CustomHeaders = ({ headers: headersFromProps, onChange, readOnly }) => {\n  const { spacing } = useTheme2();\n  const [headers, setHeaders] = useState(\n    headersFromProps.map((header) => __spreadProps(__spreadValues({}, header), {\n      id: uniqueId(),\n      value: \"\"\n    }))\n  );\n  useEffect(() => {\n    setHeaders((headers2) => {\n      let changed = false;\n      const newHeaders = headers2.map((header) => {\n        var _a;\n        const configured = (_a = headersFromProps.find((h) => h.name === header.name)) == null ? void 0 : _a.configured;\n        if (typeof configured !== \"undefined\" && header.configured !== configured) {\n          changed = true;\n          return __spreadProps(__spreadValues({}, header), { configured });\n        }\n        return header;\n      });\n      if (changed) {\n        return newHeaders;\n      }\n      return headers2;\n    });\n  }, [headersFromProps]);\n  const onHeaderAdd = () => {\n    setHeaders([...headers, { id: uniqueId(), name: \"\", value: \"\", configured: false }]);\n  };\n  const onHeaderChange = (id, header) => {\n    setHeaders(headers.map((h) => h.id === id ? __spreadValues({}, header) : h));\n  };\n  const onHeaderDelete = (id) => {\n    const index = headers.findIndex((h) => h.id === id);\n    if (index === -1) {\n      return;\n    }\n    const newHeaders = [...headers];\n    newHeaders.splice(index, 1);\n    setHeaders(newHeaders);\n    onChange(\n      newHeaders.map(({ name, value, configured }) => ({\n        name,\n        value,\n        configured\n      }))\n    );\n  };\n  const onBlur = () => {\n    onChange(\n      headers.map(({ name, value, configured }) => ({\n        name,\n        value,\n        configured\n      }))\n    );\n  };\n  const styles = {\n    container: css({\n      marginTop: spacing(3)\n    }),\n    addHeaderButton: css({\n      marginTop: spacing(1.5)\n    })\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.container }, /* @__PURE__ */ React.createElement(\n    ConfigSubSection,\n    {\n      title: \"HTTP headers\",\n      description: \"Pass along additional context and metadata about the request/response\",\n      isCollapsible: true,\n      isInitiallyOpen: headers.length > 0\n    },\n    /* @__PURE__ */ React.createElement(\"div\", null, headers.map((header) => /* @__PURE__ */ React.createElement(\n      CustomHeader,\n      {\n        key: header.id,\n        header,\n        onChange: (header2) => onHeaderChange(header2.id, header2),\n        onDelete: () => onHeaderDelete(header.id),\n        onBlur,\n        readOnly\n      }\n    ))),\n    /* @__PURE__ */ React.createElement(\"div\", { className: styles.addHeaderButton }, /* @__PURE__ */ React.createElement(Button, { icon: \"plus\", variant: \"secondary\", fill: \"outline\", onClick: onHeaderAdd, disabled: readOnly }, headers.length === 0 ? \"Add header\" : \"Add another header\"))\n  ));\n};\nfunction uniqueId() {\n  return Math.random().toString(16).slice(2);\n}\n\nexport { CustomHeaders };\n//# sourceMappingURL=CustomHeaders.js.map\n","import React from 'react';\nimport { css } from '@emotion/css';\nimport { AuthMethodSettings } from './auth-method/AuthMethodSettings.js';\nimport { TLSSettings } from './tls/TLSSettings.js';\nimport { CustomHeaders } from './custom-headers/CustomHeaders.js';\nimport { ConfigSection } from '../ConfigSection/ConfigSection.js';\nimport '@grafana/ui';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst Auth = ({\n  selectedMethod,\n  mostCommonMethod,\n  visibleMethods,\n  defaultOptionsOverrides,\n  customMethods,\n  onAuthMethodSelect,\n  basicAuth,\n  TLS,\n  customHeaders,\n  readOnly = false\n}) => {\n  const styles = {\n    container: css({\n      maxWidth: 578\n    })\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.container }, /* @__PURE__ */ React.createElement(ConfigSection, { title: \"Authentication\" }, /* @__PURE__ */ React.createElement(\n    AuthMethodSettings,\n    {\n      selectedMethod,\n      mostCommonMethod,\n      customMethods,\n      visibleMethods,\n      defaultOptionsOverrides,\n      onAuthMethodSelect,\n      basicAuth,\n      readOnly\n    }\n  ), TLS && /* @__PURE__ */ React.createElement(TLSSettings, __spreadProps(__spreadValues({}, TLS), { readOnly })), customHeaders && /* @__PURE__ */ React.createElement(CustomHeaders, __spreadProps(__spreadValues({}, customHeaders), { readOnly }))));\n};\n\nexport { Auth };\n//# sourceMappingURL=Auth.js.map\n","import { AuthMethod } from './types.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst headerNamePrefix = \"httpHeaderName\";\nconst headerValuePrefix = \"httpHeaderValue\";\nfunction convertLegacyAuthProps({\n  config,\n  onChange\n}) {\n  const props = {\n    selectedMethod: getSelectedMethod(config),\n    onAuthMethodSelect: getOnAuthMethodSelectHandler(config, onChange),\n    basicAuth: getBasicAuthProps(config, onChange),\n    TLS: getTLSProps(config, onChange),\n    customHeaders: getCustomHeaders(config, onChange),\n    readOnly: config.readOnly\n  };\n  return props;\n}\nfunction getSelectedMethod(config) {\n  if (config.basicAuth) {\n    return AuthMethod.BasicAuth;\n  }\n  if (config.withCredentials) {\n    return AuthMethod.CrossSiteCredentials;\n  }\n  if (config.jsonData.oauthPassThru) {\n    return AuthMethod.OAuthForward;\n  }\n  return AuthMethod.NoAuth;\n}\nfunction getOnAuthMethodSelectHandler(config, onChange) {\n  return (method) => {\n    onChange(__spreadProps(__spreadValues({}, config), {\n      basicAuth: method === AuthMethod.BasicAuth,\n      withCredentials: method === AuthMethod.CrossSiteCredentials,\n      jsonData: __spreadProps(__spreadValues({}, config.jsonData), {\n        oauthPassThru: method === AuthMethod.OAuthForward\n      })\n    }));\n  };\n}\nfunction getBasicAuthProps(config, onChange) {\n  return {\n    user: config.basicAuthUser,\n    passwordConfigured: config.secureJsonFields.basicAuthPassword,\n    onUserChange: (user) => onChange(__spreadProps(__spreadValues({}, config), { basicAuthUser: user })),\n    onPasswordChange: (password) => onChange(__spreadProps(__spreadValues({}, config), {\n      secureJsonData: __spreadProps(__spreadValues({}, config.secureJsonData), {\n        basicAuthPassword: password\n      })\n    })),\n    onPasswordReset: () => onChange(__spreadProps(__spreadValues({}, config), {\n      secureJsonData: __spreadProps(__spreadValues({}, config.secureJsonData), { basicAuthPassword: \"\" }),\n      secureJsonFields: __spreadProps(__spreadValues({}, config.secureJsonFields), {\n        basicAuthPassword: false\n      })\n    }))\n  };\n}\nfunction getTLSProps(config, onChange) {\n  return {\n    selfSignedCertificate: {\n      enabled: Boolean(config.jsonData.tlsAuthWithCACert),\n      certificateConfigured: config.secureJsonFields.tlsCACert,\n      onToggle: (enabled) => enabled ? onChange(__spreadProps(__spreadValues({}, config), {\n        jsonData: __spreadProps(__spreadValues({}, config.jsonData), { tlsAuthWithCACert: enabled })\n      })) : onChange(__spreadProps(__spreadValues({}, config), {\n        jsonData: __spreadProps(__spreadValues({}, config.jsonData), { tlsAuthWithCACert: enabled }),\n        secureJsonData: __spreadProps(__spreadValues({}, config.secureJsonData), { tlsCACert: \"\" }),\n        secureJsonFields: __spreadProps(__spreadValues({}, config.secureJsonFields), { tlsCACert: false })\n      })),\n      onCertificateChange: (certificate) => onChange(__spreadProps(__spreadValues({}, config), {\n        secureJsonData: __spreadProps(__spreadValues({}, config.secureJsonData), { tlsCACert: certificate })\n      })),\n      onCertificateReset: () => onChange(__spreadProps(__spreadValues({}, config), {\n        secureJsonData: __spreadProps(__spreadValues({}, config.secureJsonData), { tlsCACert: \"\" }),\n        secureJsonFields: __spreadProps(__spreadValues({}, config.secureJsonFields), { tlsCACert: false })\n      }))\n    },\n    TLSClientAuth: {\n      enabled: config.jsonData.tlsAuth,\n      serverName: config.jsonData.serverName,\n      clientCertificateConfigured: config.secureJsonFields.tlsClientCert,\n      clientKeyConfigured: config.secureJsonFields.tlsClientKey,\n      onToggle: (enabled) => enabled ? onChange(__spreadProps(__spreadValues({}, config), {\n        jsonData: __spreadProps(__spreadValues({}, config.jsonData), { tlsAuth: enabled })\n      })) : onChange(__spreadProps(__spreadValues({}, config), {\n        jsonData: __spreadProps(__spreadValues({}, config.jsonData), { tlsAuth: enabled, serverName: \"\" }),\n        secureJsonData: __spreadProps(__spreadValues({}, config.secureJsonData), { tlsClientCert: \"\", tlsClientKey: \"\" }),\n        secureJsonFields: __spreadProps(__spreadValues({}, config.secureJsonFields), { tlsClientCert: false, tlsClientKey: false })\n      })),\n      onServerNameChange: (serverName) => onChange(__spreadProps(__spreadValues({}, config), {\n        jsonData: __spreadProps(__spreadValues({}, config.jsonData), { serverName })\n      })),\n      onClientCertificateChange: (clientCertificate) => onChange(__spreadProps(__spreadValues({}, config), {\n        secureJsonData: __spreadProps(__spreadValues({}, config.secureJsonData), {\n          tlsClientCert: clientCertificate\n        })\n      })),\n      onClientCertificateReset: () => onChange(__spreadProps(__spreadValues({}, config), {\n        secureJsonData: __spreadProps(__spreadValues({}, config.secureJsonData), {\n          tlsClientCert: \"\"\n        }),\n        secureJsonFields: __spreadProps(__spreadValues({}, config.secureJsonFields), {\n          tlsClientCert: false\n        })\n      })),\n      onClientKeyChange: (clientKey) => onChange(__spreadProps(__spreadValues({}, config), {\n        secureJsonData: __spreadProps(__spreadValues({}, config.secureJsonData), {\n          tlsClientKey: clientKey\n        })\n      })),\n      onClientKeyReset: () => onChange(__spreadProps(__spreadValues({}, config), {\n        secureJsonData: __spreadProps(__spreadValues({}, config.secureJsonData), {\n          tlsClientKey: \"\"\n        }),\n        secureJsonFields: __spreadProps(__spreadValues({}, config.secureJsonFields), {\n          tlsClientKey: false\n        })\n      }))\n    },\n    skipTLSVerification: {\n      enabled: config.jsonData.tlsSkipVerify,\n      onToggle: (enabled) => onChange(__spreadProps(__spreadValues({}, config), {\n        jsonData: __spreadProps(__spreadValues({}, config.jsonData), { tlsSkipVerify: enabled })\n      }))\n    }\n  };\n}\nfunction getCustomHeaders(config, onChange) {\n  const headers = Object.keys(config.jsonData).filter((key) => key.startsWith(headerNamePrefix)).sort().map((key) => {\n    var _a;\n    const index = key.slice(headerNamePrefix.length);\n    return {\n      name: config.jsonData[key],\n      configured: (_a = config.secureJsonFields[`${headerValuePrefix}${index}`]) != null ? _a : false\n    };\n  });\n  return {\n    headers,\n    onChange: (headers2) => {\n      const newJsonData = Object.fromEntries(\n        Object.entries(config.jsonData).filter(([key]) => !key.startsWith(headerNamePrefix))\n      );\n      const newSecureJsonData = Object.fromEntries(\n        Object.entries(config.secureJsonData || {}).filter(([key]) => !key.startsWith(headerValuePrefix))\n      );\n      const newSecureJsonFields = Object.fromEntries(\n        Object.entries(config.secureJsonFields).filter(([key]) => !key.startsWith(headerValuePrefix))\n      );\n      headers2.forEach((header, index) => {\n        newJsonData[`${headerNamePrefix}${index + 1}`] = header.name;\n        if (header.configured) {\n          newSecureJsonFields[`${headerValuePrefix}${index + 1}`] = true;\n        } else {\n          newSecureJsonData[`${headerValuePrefix}${index + 1}`] = header.value;\n        }\n      });\n      onChange(__spreadProps(__spreadValues({}, config), {\n        jsonData: newJsonData,\n        secureJsonData: newSecureJsonData,\n        secureJsonFields: newSecureJsonFields\n      }));\n    }\n  };\n}\n\nexport { convertLegacyAuthProps, getBasicAuthProps, getCustomHeaders, getOnAuthMethodSelectHandler, getSelectedMethod, getTLSProps };\n//# sourceMappingURL=utils.js.map\n","import React from 'react';\nimport { css, cx } from '@emotion/css';\nimport { InlineField, TagsInput, Input } from '@grafana/ui';\nimport { ConfigSubSection } from '../ConfigSection/ConfigSubSection.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst AdvancedHttpSettings = ({\n  config,\n  onChange,\n  className\n}) => {\n  const onCookiesChange = (cookies) => {\n    onChange(__spreadProps(__spreadValues({}, config), {\n      jsonData: __spreadProps(__spreadValues({}, config.jsonData), {\n        keepCookies: cookies\n      })\n    }));\n  };\n  const onTimeoutChange = (event) => {\n    onChange(__spreadProps(__spreadValues({}, config), {\n      jsonData: __spreadProps(__spreadValues({}, config.jsonData), {\n        timeout: parseInt(event.currentTarget.value, 10)\n      })\n    }));\n  };\n  const styles = {\n    container: css({\n      maxWidth: 578\n    })\n  };\n  return /* @__PURE__ */ React.createElement(ConfigSubSection, { title: \"Advanced HTTP settings\", className: cx(styles.container, className) }, /* @__PURE__ */ React.createElement(\n    InlineField,\n    {\n      htmlFor: \"advanced-http-cookies\",\n      label: \"Allowed cookies\",\n      labelWidth: 24,\n      tooltip: \"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.\",\n      disabled: config.readOnly,\n      grow: true\n    },\n    /* @__PURE__ */ React.createElement(\n      TagsInput,\n      {\n        id: \"advanced-http-cookies\",\n        placeholder: \"New cookie (hit enter to add)\",\n        tags: config.jsonData.keepCookies,\n        onChange: onCookiesChange\n      }\n    )\n  ), /* @__PURE__ */ React.createElement(\n    InlineField,\n    {\n      htmlFor: \"advanced-http-timeout\",\n      label: \"Timeout\",\n      labelWidth: 24,\n      tooltip: \"HTTP request timeout in seconds\",\n      disabled: config.readOnly,\n      grow: true\n    },\n    /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"advanced-http-timeout\",\n        type: \"number\",\n        min: 0,\n        placeholder: \"Timeout in seconds\",\n        \"aria-label\": \"Timeout in seconds\",\n        value: config.jsonData.timeout,\n        onChange: onTimeoutChange\n      }\n    )\n  ));\n};\n\nexport { AdvancedHttpSettings };\n//# sourceMappingURL=AdvancedHttpSettings.js.map\n","import { css } from '@emotion/css';\n\nimport { DataSourcePluginOptionsEditorProps, GrafanaTheme2 } from '@grafana/data';\nimport {\n  AdvancedHttpSettings,\n  Auth,\n  ConfigSection,\n  ConfigSubSection,\n  ConnectionSettings,\n  DataSourceDescription,\n  convertLegacyAuthProps,\n} from '@grafana/experimental';\nimport { config } from '@grafana/runtime';\nimport {\n  Divider,\n  EventsWithValidation,\n  LegacyForms,\n  SecureSocksProxySettings,\n  Stack,\n  regexValidation,\n  useStyles2,\n} from '@grafana/ui';\n\nimport { PyroscopeDataSourceOptions } from './types';\n\ninterface Props extends DataSourcePluginOptionsEditorProps<PyroscopeDataSourceOptions> {}\n\nexport const ConfigEditor = (props: Props) => {\n  const { options, onOptionsChange } = props;\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.container}>\n      <DataSourceDescription\n        dataSourceName=\"Pyroscope\"\n        docsLink=\"https://grafana.com/docs/grafana/latest/datasources/pyroscope\"\n        hasRequiredFields={false}\n      />\n\n      <Divider spacing={4} />\n\n      <ConnectionSettings config={options} onChange={onOptionsChange} urlPlaceholder=\"http://localhost:4040\" />\n\n      <Divider spacing={4} />\n      <Auth\n        {...convertLegacyAuthProps({\n          config: options,\n          onChange: onOptionsChange,\n        })}\n      />\n\n      <Divider spacing={4} />\n      <ConfigSection\n        title=\"Additional settings\"\n        description=\"Additional settings are optional settings that can be configured for more control over your data source.\"\n        isCollapsible={true}\n        isInitiallyOpen={false}\n      >\n        <Stack gap={5} direction=\"column\">\n          <AdvancedHttpSettings config={options} onChange={onOptionsChange} />\n\n          {config.secureSocksDSProxyEnabled && (\n            <SecureSocksProxySettings options={options} onOptionsChange={onOptionsChange} />\n          )}\n\n          <ConfigSubSection title=\"Querying\">\n            <LegacyForms.FormField\n              label=\"Minimal step\"\n              labelWidth={13}\n              inputEl={\n                <LegacyForms.Input\n                  className=\"width-6\"\n                  value={options.jsonData.minStep}\n                  spellCheck={false}\n                  placeholder=\"15s\"\n                  onChange={(event) => {\n                    onOptionsChange({\n                      ...options,\n                      jsonData: {\n                        ...options.jsonData,\n                        minStep: event.currentTarget.value,\n                      },\n                    });\n                  }}\n                  validationEvents={{\n                    [EventsWithValidation.onBlur]: [\n                      regexValidation(\n                        /^$|^\\d+(ms|[Mwdhmsy])$/,\n                        'Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s'\n                      ),\n                    ],\n                  }}\n                />\n              }\n              tooltip=\"Minimal step used for metric query. Should be the same or higher as the scrape interval setting in the Pyroscope database.\"\n            />\n          </ConfigSubSection>\n        </Stack>\n      </ConfigSection>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css({\n    marginBottom: theme.spacing(2),\n    maxWidth: '900px',\n  }),\n});\n","import { useEffect, useMemo, useState } from 'react';\n\nimport { TimeRange } from '@grafana/data';\nimport { Cascader, CascaderOption } from '@grafana/ui';\n\nimport { PyroscopeDataSource } from '../datasource';\nimport { ProfileTypeMessage } from '../types';\n\ntype Props = {\n  initialProfileTypeId?: string;\n  profileTypes?: ProfileTypeMessage[];\n  onChange: (value: string) => void;\n  placeholder?: string;\n  width?: number;\n};\n\nexport function ProfileTypesCascader(props: Props) {\n  const cascaderOptions = useCascaderOptions(props.profileTypes);\n\n  return (\n    <Cascader\n      placeholder={props.placeholder}\n      separator={'-'}\n      displayAllSelectedLevels={true}\n      initialValue={props.initialProfileTypeId}\n      allowCustomValue={true}\n      onSelect={props.onChange}\n      options={cascaderOptions}\n      changeOnSelect={false}\n      width={props.width ?? 26}\n    />\n  );\n}\n\n// Turn profileTypes into cascader options\nfunction useCascaderOptions(profileTypes?: ProfileTypeMessage[]): CascaderOption[] {\n  return useMemo(() => {\n    if (!profileTypes) {\n      return [];\n    }\n    let mainTypes = new Map<string, CascaderOption>();\n    // Classify profile types by name then sample type.\n    // The profileTypes are something like cpu:sample:nanoseconds:sample:count or app.something.something\n    for (let profileType of profileTypes) {\n      let parts: string[] = [];\n      if (profileType.id.indexOf(':') > -1) {\n        parts = profileType.id.split(':');\n      }\n\n      const [name, type] = parts;\n\n      if (!mainTypes.has(name)) {\n        mainTypes.set(name, {\n          label: name,\n          value: name,\n          items: [],\n        });\n      }\n      mainTypes.get(name)?.items!.push({\n        label: type,\n        value: profileType.id,\n      });\n    }\n    return Array.from(mainTypes.values());\n  }, [profileTypes]);\n}\n\n/**\n * Loads the profile types.\n *\n * This is exported and not used directly in the ProfileTypesCascader component because in some case we need to know\n * the profileTypes before rendering the cascader.\n * @param datasource\n * @param range Time range for the profile types query.\n */\nexport function useProfileTypes(datasource: PyroscopeDataSource, range?: TimeRange) {\n  const [profileTypes, setProfileTypes] = useState<ProfileTypeMessage[]>();\n\n  const impreciseRange = {\n    to: Math.ceil((range?.to.valueOf() || 0) / 60000) * 60000,\n    from: Math.floor((range?.from.valueOf() || 0) / 60000) * 60000,\n  };\n\n  useEffect(() => {\n    (async () => {\n      const profileTypes = await datasource.getProfileTypes(impreciseRange.from.valueOf(), impreciseRange.to.valueOf());\n      setProfileTypes(profileTypes);\n    })();\n  }, [datasource, impreciseRange.from, impreciseRange.to]);\n\n  return profileTypes;\n}\n","import { useEffect, useState } from 'react';\n\nimport { QueryEditorProps, SelectableValue, TimeRange } from '@grafana/data';\nimport { InlineField, InlineFieldRow, LoadingPlaceholder, Select } from '@grafana/ui';\n\nimport { ProfileTypesCascader, useProfileTypes } from './QueryEditor/ProfileTypesCascader';\nimport { PyroscopeDataSource } from './datasource';\nimport { Query, VariableQuery } from './types';\n\nexport function VariableQueryEditor(props: QueryEditorProps<PyroscopeDataSource, Query, {}, VariableQuery>) {\n  return (\n    <>\n      <InlineFieldRow>\n        <InlineField\n          label=\"Query type\"\n          labelWidth={20}\n          tooltip={\n            <div>The Pyroscope data source plugin provides the following query types for template variables</div>\n          }\n        >\n          <Select\n            placeholder=\"Select query type\"\n            aria-label=\"Query type\"\n            width={25}\n            options={[\n              { label: 'Profile type', value: 'profileType' as const },\n              { label: 'Label', value: 'label' as const },\n              { label: 'Label value', value: 'labelValue' as const },\n            ]}\n            onChange={(value) => {\n              if (value.value! === 'profileType') {\n                props.onChange({\n                  type: value.value!,\n                  refId: props.query.refId,\n                });\n              }\n              if (value.value! === 'label' || value.value! === 'labelValue') {\n                props.onChange({\n                  type: value.value!,\n                  refId: props.query.refId,\n                  // Make sure we keep already selected values if they make sense for the variable type\n                  profileTypeId: props.query.type !== 'profileType' ? props.query.profileTypeId : '',\n                });\n              }\n            }}\n            value={props.query.type}\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      {(props.query.type === 'labelValue' || props.query.type === 'label') && (\n        <ProfileTypeRow\n          datasource={props.datasource}\n          initialValue={props.query.profileTypeId}\n          onChange={(val) => {\n            // To make TS happy\n            if (props.query.type === 'label' || props.query.type === 'labelValue') {\n              props.onChange({ ...props.query, profileTypeId: val });\n            }\n          }}\n          range={props.range}\n        />\n      )}\n\n      {props.query.type === 'labelValue' && (\n        <LabelRow\n          value={props.query.labelName}\n          datasource={props.datasource}\n          profileTypeId={props.query.profileTypeId}\n          onChange={(val) => {\n            if (props.query.type === 'labelValue') {\n              props.onChange({ ...props.query, labelName: val });\n            }\n          }}\n          from={props.range?.from.valueOf() || Date.now().valueOf() - 1000 * 60 * 60 * 24}\n          to={props.range?.to.valueOf() || Date.now().valueOf()}\n        />\n      )}\n    </>\n  );\n}\n\nfunction LabelRow(props: {\n  datasource: PyroscopeDataSource;\n  value?: string;\n  profileTypeId?: string;\n  from: number;\n  to: number;\n  onChange: (val: string) => void;\n}) {\n  const [labels, setLabels] = useState<string[]>();\n  useEffect(() => {\n    (async () => {\n      setLabels(\n        await props.datasource.getLabelNames(\n          props.profileTypeId ? getProfileTypeLabel(props.profileTypeId) : '{}',\n          props.from,\n          props.to\n        )\n      );\n    })();\n  }, [props.datasource, props.profileTypeId, props.to, props.from]);\n\n  const options = labels ? labels.map<SelectableValue>((v) => ({ label: v, value: v })) : [];\n  if (labels && props.value && !labels.find((v) => v === props.value)) {\n    options.push({ value: props.value, label: props.value });\n  }\n\n  return (\n    <InlineFieldRow>\n      <InlineField\n        label={'Label'}\n        labelWidth={20}\n        tooltip={<div>Select label for which to retrieve available values</div>}\n      >\n        <Select\n          allowCustomValue={true}\n          placeholder=\"Select label\"\n          aria-label=\"Select label\"\n          width={25}\n          options={options}\n          onChange={(option) => props.onChange(option.value)}\n          value={props.value}\n        />\n      </InlineField>\n    </InlineFieldRow>\n  );\n}\n\nfunction ProfileTypeRow(props: {\n  datasource: PyroscopeDataSource;\n  onChange: (val: string) => void;\n  initialValue?: string;\n  range?: TimeRange;\n}) {\n  const profileTypes = useProfileTypes(props.datasource, props.range);\n  return (\n    <InlineFieldRow>\n      <InlineField\n        label={'Profile type'}\n        aria-label={'Profile type'}\n        labelWidth={20}\n        tooltip={<div>Select profile type for which to retrieve available labels</div>}\n      >\n        {profileTypes ? (\n          <ProfileTypesCascader\n            onChange={props.onChange}\n            profileTypes={profileTypes}\n            initialProfileTypeId={props.initialValue}\n          />\n        ) : (\n          <LoadingPlaceholder text={'Loading'} />\n        )}\n      </InlineField>\n    </InlineFieldRow>\n  );\n}\n\nexport function getProfileTypeLabel(type: string) {\n  return `{__profile_type__=\"${type}\"}`;\n}\n","import { from, map, Observable, of } from 'rxjs';\n\nimport { CustomVariableSupport, DataQueryRequest, DataQueryResponse, MetricFindValue } from '@grafana/data';\n\nimport { getProfileTypeLabel, VariableQueryEditor } from './VariableQueryEditor';\nimport { PyroscopeDataSource } from './datasource';\nimport { ProfileTypeMessage, VariableQuery } from './types';\n\nexport interface DataAPI {\n  getProfileTypes(start: number, end: number): Promise<ProfileTypeMessage[]>;\n  getLabelNames(query: string, start: number, end: number): Promise<string[]>;\n  getLabelValues(query: string, label: string, start: number, end: number): Promise<string[]>;\n}\n\nexport class VariableSupport extends CustomVariableSupport<PyroscopeDataSource> {\n  constructor(private readonly dataAPI: DataAPI) {\n    super();\n  }\n\n  editor = VariableQueryEditor;\n\n  query(request: DataQueryRequest<VariableQuery>): Observable<DataQueryResponse> {\n    if (request.targets[0].type === 'profileType') {\n      return from(this.dataAPI.getProfileTypes(request.range.from.valueOf(), request.range.to.valueOf())).pipe(\n        map((values) => {\n          return { data: values.map<MetricFindValue>((v) => ({ text: v.label, value: v.id })) };\n        })\n      );\n    }\n\n    if (request.targets[0].type === 'label') {\n      if (!request.targets[0].profileTypeId) {\n        return of({ data: [] });\n      }\n      return from(\n        this.dataAPI.getLabelNames(\n          getProfileTypeLabel(request.targets[0].profileTypeId),\n          request.range.from.valueOf(),\n          request.range.to.valueOf()\n        )\n      ).pipe(\n        map((values) => {\n          return { data: values.map((v) => ({ text: v })) };\n        })\n      );\n    }\n\n    if (request.targets[0].type === 'labelValue') {\n      if (!request.targets[0].labelName || !request.targets[0].profileTypeId) {\n        return of({ data: [] });\n      }\n      return from(\n        this.dataAPI.getLabelValues(\n          getProfileTypeLabel(request.targets[0].profileTypeId),\n          request.targets[0].labelName,\n          request.range.from.valueOf(),\n          request.range.to.valueOf()\n        )\n      ).pipe(\n        map((values) => {\n          return { data: values.map((v) => ({ text: v })) };\n        })\n      );\n    }\n\n    return of({ data: [] });\n  }\n}\n","import { invert } from 'lodash';\nimport Prism, { Grammar, Token } from 'prismjs';\n\nimport { AbstractLabelMatcher, AbstractLabelOperator } from '@grafana/data';\n\nexport function extractLabelMatchers(tokens: Array<string | Token>): AbstractLabelMatcher[] {\n  const labelMatchers: AbstractLabelMatcher[] = [];\n\n  for (const token of tokens) {\n    if (!(token instanceof Token)) {\n      continue;\n    }\n\n    if (token.type === 'context-labels') {\n      let labelKey = '';\n      let labelValue = '';\n      let labelOperator = '';\n\n      const contentTokens = Array.isArray(token.content) ? token.content : [token.content];\n\n      for (let currentToken of contentTokens) {\n        if (typeof currentToken === 'string') {\n          let currentStr: string;\n          currentStr = currentToken;\n          if (currentStr === '=' || currentStr === '!=' || currentStr === '=~' || currentStr === '!~') {\n            labelOperator = currentStr;\n          }\n        } else if (currentToken instanceof Token) {\n          switch (currentToken.type) {\n            case 'label-key':\n              labelKey = getMaybeTokenStringContent(currentToken);\n              break;\n            case 'label-value':\n              labelValue = getMaybeTokenStringContent(currentToken);\n              labelValue = labelValue.substring(1, labelValue.length - 1);\n              const labelComparator = FromPromLikeMap[labelOperator];\n              if (labelComparator) {\n                labelMatchers.push({ name: labelKey, operator: labelComparator, value: labelValue });\n              }\n              break;\n          }\n        }\n      }\n    }\n  }\n\n  return labelMatchers;\n}\n\nexport function toPromLikeExpr(labelMatchers: AbstractLabelMatcher[]): string {\n  const expr = labelMatchers\n    .map((selector: AbstractLabelMatcher) => {\n      const operator = ToPromLikeMap[selector.operator];\n      if (operator) {\n        return `${selector.name}${operator}\"${selector.value}\"`;\n      } else {\n        return '';\n      }\n    })\n    .filter((e: string) => e !== '')\n    .join(', ');\n\n  return expr ? `{${expr}}` : '';\n}\n\nfunction getMaybeTokenStringContent(token: Token): string {\n  if (typeof token.content === 'string') {\n    return token.content;\n  }\n\n  return '';\n}\n\nconst FromPromLikeMap: Record<string, AbstractLabelOperator> = {\n  '=': AbstractLabelOperator.Equal,\n  '!=': AbstractLabelOperator.NotEqual,\n  '=~': AbstractLabelOperator.EqualRegEx,\n  '!~': AbstractLabelOperator.NotEqualRegEx,\n};\n\nconst ToPromLikeMap: Record<AbstractLabelOperator, string> = invert(FromPromLikeMap) as Record<\n  AbstractLabelOperator,\n  string\n>;\n\n/**\n * Modifies query, adding a new label=value pair to it while preserving other parts of the query. This operates on a\n * string representation of the query which needs to be parsed and then rendered to string again.\n */\nexport function addLabelToQuery(query: string, key: string, value: string | number, operator = '='): string {\n  if (!key || !value) {\n    throw new Error('Need label to add to query.');\n  }\n\n  const tokens = Prism.tokenize(query, grammar);\n  let labels = extractLabelMatchers(tokens);\n\n  // If we already have such label in the query, remove it and we will replace it. If we didn't we would end up\n  // with query like `a=b,a=c` which won't return anything. Replacing also seems more meaningful here than just\n  // ignoring the filter and keeping the old value.\n  labels = labels.filter((l) => l.name !== key);\n  labels.push({\n    name: key,\n    value: value.toString(),\n    operator: FromPromLikeMap[operator] ?? AbstractLabelOperator.Equal,\n  });\n\n  return toPromLikeExpr(labels);\n}\n\nexport const grammar: Grammar = {\n  'context-labels': {\n    pattern: /\\{[^}]*(?=}?)/,\n    greedy: true,\n    inside: {\n      comment: {\n        pattern: /#.*/,\n      },\n      'label-key': {\n        pattern: /[a-zA-Z_]\\w*(?=\\s*(=|!=|=~|!~))/,\n        alias: 'attr-name',\n        greedy: true,\n      },\n      'label-value': {\n        pattern: /\"(?:\\\\.|[^\\\\\"])*\"/,\n        greedy: true,\n        alias: 'attr-value',\n      },\n      punctuation: /[{]/,\n    },\n  },\n  punctuation: /[{}(),.]/,\n};\n","import Prism from 'prismjs';\nimport { Observable, of } from 'rxjs';\n\nimport {\n  AbstractQuery,\n  AdHocVariableFilter,\n  CoreApp,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataSourceGetTagKeysOptions,\n  DataSourceGetTagValuesOptions,\n  DataSourceInstanceSettings,\n  MetricFindValue,\n  ScopedVars,\n} from '@grafana/data';\nimport { DataSourceWithBackend, getTemplateSrv, TemplateSrv } from '@grafana/runtime';\n\nimport { VariableSupport } from './VariableSupport';\nimport { defaultGrafanaPyroscopeDataQuery, defaultPyroscopeQueryType } from './dataquery.gen';\nimport { PyroscopeDataSourceOptions, Query, ProfileTypeMessage } from './types';\nimport { addLabelToQuery, extractLabelMatchers, grammar, toPromLikeExpr } from './utils';\n\nexport class PyroscopeDataSource extends DataSourceWithBackend<Query, PyroscopeDataSourceOptions> {\n  constructor(\n    instanceSettings: DataSourceInstanceSettings<PyroscopeDataSourceOptions>,\n    private readonly templateSrv: TemplateSrv = getTemplateSrv()\n  ) {\n    super(instanceSettings);\n    this.variables = new VariableSupport(this);\n  }\n\n  query(request: DataQueryRequest<Query>): Observable<DataQueryResponse> {\n    const validTargets = request.targets\n      .filter((t) => t.profileTypeId)\n      .map((t) => {\n        // Empty string errors out but honestly seems like we can just normalize it this way\n        if (t.labelSelector === '') {\n          return {\n            ...t,\n            labelSelector: '{}',\n          };\n        }\n        return normalizeQuery(t, request.app);\n      });\n    if (!validTargets.length) {\n      return of({ data: [] });\n    }\n    return super.query({\n      ...request,\n      targets: validTargets,\n    });\n  }\n\n  async getProfileTypes(start: number, end: number): Promise<ProfileTypeMessage[]> {\n    return await this.getResource('profileTypes', {\n      start,\n      end,\n    });\n  }\n\n  async getAllProfileTypes(): Promise<ProfileTypeMessage[]> {\n    return await this.getResource('profileTypes');\n  }\n\n  async getLabelNames(query: string, start: number, end: number): Promise<string[]> {\n    return await this.getResource('labelNames', { query: this.templateSrv.replace(query), start, end });\n  }\n\n  async getLabelValues(query: string, label: string, start: number, end: number): Promise<string[]> {\n    return await this.getResource('labelValues', {\n      label: this.templateSrv.replace(label),\n      query: this.templateSrv.replace(query),\n      start,\n      end,\n    });\n  }\n\n  // By implementing getTagKeys and getTagValues we add ad-hoc filters functionality\n  async getTagKeys(options: DataSourceGetTagKeysOptions<Query>): Promise<MetricFindValue[]> {\n    const data = this.adhocFilterData(options);\n    const labels = await this.getLabelNames(data.query, data.from, data.to);\n    return labels.map((label) => ({ text: label }));\n  }\n\n  // By implementing getTagKeys and getTagValues we add ad-hoc filters functionality\n  async getTagValues(options: DataSourceGetTagValuesOptions<Query>): Promise<MetricFindValue[]> {\n    const data = this.adhocFilterData(options);\n    const labels = await this.getLabelValues(data.query, options.key, data.from, data.to);\n    return labels.map((label) => ({ text: label }));\n  }\n\n  private adhocFilterData(options: DataSourceGetTagKeysOptions<Query> | DataSourceGetTagValuesOptions<Query>) {\n    const from = options.timeRange?.from.valueOf() ?? Date.now() - 1000 * 60 * 60 * 24;\n    const to = options.timeRange?.to.valueOf() ?? Date.now();\n    const query = '{' + options.filters.map((f) => `${f.key}${f.operator}\"${f.value}\"`).join(',') + '}';\n    return { from, to, query };\n  }\n\n  applyTemplateVariables(query: Query, scopedVars: ScopedVars, filters?: AdHocVariableFilter[]): Query {\n    let labelSelector = this.templateSrv.replace(query.labelSelector ?? '', scopedVars);\n    if (filters && labelSelector) {\n      for (const filter of filters) {\n        labelSelector = addLabelToQuery(labelSelector, filter.key, filter.value, filter.operator);\n      }\n    }\n    return {\n      ...query,\n      labelSelector,\n      profileTypeId: this.templateSrv.replace(query.profileTypeId ?? '', scopedVars),\n    };\n  }\n\n  async importFromAbstractQueries(abstractQueries: AbstractQuery[]): Promise<Query[]> {\n    return abstractQueries.map((abstractQuery) => this.importFromAbstractQuery(abstractQuery));\n  }\n\n  importFromAbstractQuery(labelBasedQuery: AbstractQuery): Query {\n    return {\n      refId: labelBasedQuery.refId,\n      labelSelector: toPromLikeExpr(labelBasedQuery.labelMatchers),\n      queryType: 'both',\n      profileTypeId: '',\n      groupBy: [],\n    };\n  }\n\n  async exportToAbstractQueries(queries: Query[]): Promise<AbstractQuery[]> {\n    return queries.map((query) => this.exportToAbstractQuery(query));\n  }\n\n  exportToAbstractQuery(query: Query): AbstractQuery {\n    const pyroscopeQuery = query.labelSelector;\n    if (!pyroscopeQuery || pyroscopeQuery.length === 0) {\n      return { refId: query.refId, labelMatchers: [] };\n    }\n    const tokens = Prism.tokenize(pyroscopeQuery, grammar);\n    return {\n      refId: query.refId,\n      labelMatchers: extractLabelMatchers(tokens),\n    };\n  }\n\n  getDefaultQuery(app: CoreApp): Partial<Query> {\n    return defaultQuery;\n  }\n}\n\nexport const defaultQuery: Partial<Query> = {\n  ...defaultGrafanaPyroscopeDataQuery,\n  queryType: defaultPyroscopeQueryType,\n};\n\nexport function normalizeQuery(query: Query, app?: CoreApp | string) {\n  let normalized = { ...defaultQuery, ...query };\n  if (app !== CoreApp.Explore && normalized.queryType === 'both') {\n    // In dashboards and other places, we can't show both types of graphs at the same time.\n    // This will also be a default when having 'both' query and adding it from explore to dashboard\n    normalized.queryType = 'profile';\n  }\n  return normalized;\n}\n","// Code generated - EDITING IS FUTILE. DO NOT EDIT.\n//\n// Generated by:\n//     public/app/plugins/gen.go\n// Using jennies:\n//     TSTypesJenny\n//     PluginTsTypesJenny\n//\n// Run 'make gen-cue' from repository root to regenerate.\n\nimport * as common from '@grafana/schema';\n\nexport type PyroscopeQueryType = ('metrics' | 'profile' | 'both');\n\nexport const defaultPyroscopeQueryType: PyroscopeQueryType = 'both';\n\nexport interface GrafanaPyroscopeDataQuery extends common.DataQuery {\n  /**\n   * Allows to group the results.\n   */\n  groupBy: Array<string>;\n  /**\n   * Specifies the query label selectors.\n   */\n  labelSelector: string;\n  /**\n   * Sets the maximum number of nodes in the flamegraph.\n   */\n  maxNodes?: number;\n  /**\n   * Specifies the type of profile to query.\n   */\n  profileTypeId: string;\n  /**\n   * Specifies the query span selectors.\n   */\n  spanSelector?: Array<string>;\n}\n\nexport const defaultGrafanaPyroscopeDataQuery: Partial<GrafanaPyroscopeDataQuery> = {\n  groupBy: [],\n  labelSelector: '{}',\n  spanSelector: [],\n};\n","import { css } from '@emotion/css';\nimport { CSSProperties } from 'react';\nimport * as React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\ninterface StackProps {\n  direction?: CSSProperties['flexDirection'];\n  alignItems?: CSSProperties['alignItems'];\n  wrap?: boolean;\n  gap?: number;\n  flexGrow?: CSSProperties['flexGrow'];\n  children: React.ReactNode;\n}\n\nexport function Stack(props: StackProps) {\n  const styles = useStyles2(getStyles, props);\n  return <div className={styles.root}>{props.children}</div>;\n}\n\nconst getStyles = (theme: GrafanaTheme2, props: StackProps) => ({\n  root: css({\n    display: 'flex',\n    flexDirection: props.direction ?? 'row',\n    flexWrap: (props.wrap ?? true) ? 'wrap' : undefined,\n    alignItems: props.alignItems,\n    gap: theme.spacing(props.gap ?? 2),\n    flexGrow: props.flexGrow,\n  }),\n});\n","import { css } from '@emotion/css';\nimport * as React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nimport { Stack } from './Stack';\n\ninterface EditorRowProps {\n  children: React.ReactNode;\n  stackProps?: Partial<React.ComponentProps<typeof Stack>>;\n}\n\nexport const EditorRow = ({ children, stackProps }: EditorRowProps) => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.root}>\n      <Stack gap={2} {...stackProps}>\n        {children}\n      </Stack>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    root: css({\n      padding: theme.spacing(1),\n      backgroundColor: theme.colors.background.secondary,\n      borderRadius: theme.shape.radius.default,\n    }),\n  };\n};\n","import * as React from 'react';\n\nimport { Stack } from './Stack';\n\ninterface EditorRowsProps {\n  children: React.ReactNode;\n}\n\nexport const EditorRows = ({ children }: EditorRowsProps) => {\n  return (\n    <Stack gap={0.5} direction=\"column\">\n      {children}\n    </Stack>\n  );\n};\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","import type { languages } from 'monaco-editor';\n\nexport const languageConfiguration: languages.LanguageConfiguration = {\n  // the default separators except `@$`\n  wordPattern: /(-?\\d*\\.\\d\\w*)|([^`~!#%^&*()=+\\[{\\]}\\\\|;:'\",<>\\/?\\s]+)/g,\n  brackets: [['{', '}']],\n  autoClosingPairs: [\n    { open: '{', close: '}' },\n    { open: '\"', close: '\"' },\n    { open: \"'\", close: \"'\" },\n  ],\n  surroundingPairs: [\n    { open: '{', close: '}' },\n    { open: '\"', close: '\"' },\n    { open: \"'\", close: \"'\" },\n  ],\n  folding: {},\n};\n\nexport const language: languages.IMonarchLanguage = {\n  ignoreCase: false,\n  defaultToken: '',\n  tokenPostfix: '.pyroscopeql',\n\n  keywords: [],\n  operators: [],\n\n  // we include these common regular expressions\n  symbols: /[=><!~?:&|+\\-*\\/^%]+/,\n  escapes: /\\\\(?:[abfnrtv\\\\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,\n  digits: /\\d+(_+\\d+)*/,\n  octaldigits: /[0-7]+(_+[0-7]+)*/,\n  binarydigits: /[0-1]+(_+[0-1]+)*/,\n  hexdigits: /[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,\n  integersuffix: /(ll|LL|u|U|l|L)?(ll|LL|u|U|l|L)?/,\n  floatsuffix: /[fFlL]?/,\n\n  tokenizer: {\n    root: [\n      // labels\n      [/[a-z_]\\w*(?=\\s*(=|!=|=~|!~))/, 'tag'],\n\n      // strings\n      [/\"([^\"\\\\]|\\\\.)*$/, 'string.invalid'], // non-teminated string\n      [/'([^'\\\\]|\\\\.)*$/, 'string.invalid'], // non-teminated string\n      [/\"/, 'string', '@string_double'],\n      [/'/, 'string', '@string_single'],\n\n      // whitespace\n      { include: '@whitespace' },\n\n      // delimiters and operators\n      [/[{}()\\[\\]]/, '@brackets'],\n      [/[<>](?!@symbols)/, '@brackets'],\n      [\n        /@symbols/,\n        {\n          cases: {\n            '@operators': 'delimiter',\n            '@default': '',\n          },\n        },\n      ],\n\n      // numbers\n      [/\\d+/, 'number'],\n      [/\\d*\\d+[eE]([\\-+]?\\d+)?(@floatsuffix)/, 'number.float'],\n      [/\\d*\\.\\d+([eE][\\-+]?\\d+)?(@floatsuffix)/, 'number.float'],\n      [/0[xX][0-9a-fA-F']*[0-9a-fA-F](@integersuffix)/, 'number.hex'],\n      [/0[0-7']*[0-7](@integersuffix)/, 'number.octal'],\n      [/0[bB][0-1']*[0-1](@integersuffix)/, 'number.binary'],\n      [/\\d[\\d']*\\d(@integersuffix)/, 'number'],\n      [/\\d(@integersuffix)/, 'number'],\n    ],\n\n    string_double: [\n      [/[^\\\\\"]+/, 'string'],\n      [/@escapes/, 'string.escape'],\n      [/\\\\./, 'string.escape.invalid'],\n      [/\"/, 'string', '@pop'],\n    ],\n\n    string_single: [\n      [/[^\\\\']+/, 'string'],\n      [/@escapes/, 'string.escape'],\n      [/\\\\./, 'string.escape.invalid'],\n      [/'/, 'string', '@pop'],\n    ],\n\n    clauses: [\n      [/[^(,)]/, 'tag'],\n      [/\\)/, 'identifier', '@pop'],\n    ],\n\n    whitespace: [[/[ \\t\\r\\n]+/, 'white']],\n  },\n};\n","import { language, languageConfiguration } from './pyroscopeql';\n\nexport const languageDefinition = {\n  id: 'pyroscopeql',\n  extensions: ['.pyroscopeql'],\n  aliases: ['pyroscope', 'pyroscopeql'],\n  mimetypes: [],\n  def: {\n    language,\n    languageConfiguration,\n  },\n};\n","import { monacoTypes, Monaco } from '@grafana/ui';\n\n/**\n * Class that implements CompletionItemProvider interface and allows us to provide suggestion for the Monaco\n * autocomplete system.\n *\n * At this moment we just pass it all the labels/values we get from Pyroscope backend later on we may do something a bit\n * smarter if there will be lots of labels.\n */\nexport class CompletionProvider implements monacoTypes.languages.CompletionItemProvider {\n  triggerCharacters = ['{', ',', '[', '(', '=', '~', ' ', '\"'];\n\n  // We set these directly and ae required for the provider to function.\n  monaco: Monaco | undefined;\n  editor: monacoTypes.editor.IStandaloneCodeEditor | undefined;\n\n  private labels: string[] = [];\n  private getLabelValues: (label: string) => Promise<string[]> = () => Promise.resolve([]);\n\n  init(labels: string[], getLabelValues: (label: string) => Promise<string[]>) {\n    this.labels = labels;\n    this.getLabelValues = getLabelValues;\n  }\n\n  provideCompletionItems(\n    model: monacoTypes.editor.ITextModel,\n    position: monacoTypes.Position\n  ): monacoTypes.languages.ProviderResult<monacoTypes.languages.CompletionList> {\n    // Should not happen, this should not be called before it is initialized\n    if (!(this.monaco && this.editor)) {\n      throw new Error('provideCompletionItems called before CompletionProvider was initialized');\n    }\n\n    // if the model-id does not match, then this call is from a different editor-instance,\n    // not \"our instance\", so return nothing\n    if (this.editor.getModel()?.id !== model.id) {\n      return { suggestions: [] };\n    }\n\n    const { range, offset } = getRangeAndOffset(this.monaco, model, position);\n    const situation = getSituation(model.getValue(), offset);\n\n    return this.getCompletions(situation).then((completionItems) => {\n      // monaco by-default alphabetically orders the items.\n      // to stop it, we use a number-as-string sortkey,\n      // so that monaco keeps the order we use\n      const maxIndexDigits = completionItems.length.toString().length;\n      const suggestions: monacoTypes.languages.CompletionItem[] = completionItems.map((item, index) => ({\n        kind: getMonacoCompletionItemKind(item.type, this.monaco!),\n        label: item.label,\n        insertText: item.insertText,\n        sortText: index.toString().padStart(maxIndexDigits, '0'), // to force the order we have\n        range,\n      }));\n      return { suggestions };\n    });\n  }\n\n  /**\n   * Get suggestion based on the situation we are in like whether we should suggest label names or values.\n   * @param situation\n   * @private\n   */\n  private async getCompletions(situation: Situation): Promise<Completion[]> {\n    switch (situation.type) {\n      // Not really sure what would make sense to suggest in this case so just leave it\n      case 'UNKNOWN': {\n        return [];\n      }\n      case 'EMPTY': {\n        return this.labels.map((key) => {\n          return {\n            label: key,\n            insertText: `{${key}=\"`,\n            type: 'LABEL_NAME',\n          };\n        });\n      }\n      case 'IN_LABEL_NAME':\n        return this.labels.map((key) => {\n          return {\n            label: key,\n            insertText: key,\n            type: 'LABEL_NAME',\n          };\n        });\n      case 'IN_LABEL_VALUE':\n        let values = await this.getLabelValues(situation.labelName);\n        return values\n          ? values.map((key) => {\n              return {\n                label: key,\n                insertText: situation.betweenQuotes ? key : `\"${key}\"`,\n                type: 'LABEL_VALUE',\n              };\n            })\n          : [];\n      default:\n        throw new Error(`Unexpected situation ${situation}`);\n    }\n  }\n}\n\n/**\n * Get item kind which is used for icon next to the suggestion.\n * @param type\n * @param monaco\n */\nfunction getMonacoCompletionItemKind(type: CompletionType, monaco: Monaco): monacoTypes.languages.CompletionItemKind {\n  switch (type) {\n    case 'LABEL_NAME':\n      return monaco.languages.CompletionItemKind.Enum;\n    case 'LABEL_VALUE':\n      return monaco.languages.CompletionItemKind.EnumMember;\n    default:\n      throw new Error(`Unexpected CompletionType: ${type}`);\n  }\n}\n\nexport type CompletionType = 'LABEL_NAME' | 'LABEL_VALUE';\ntype Completion = {\n  type: CompletionType;\n  label: string;\n  insertText: string;\n};\n\nexport type Label = {\n  name: string;\n  value: string;\n};\n\nexport type Situation =\n  | {\n      type: 'UNKNOWN';\n    }\n  | {\n      type: 'EMPTY';\n    }\n  | {\n      type: 'IN_LABEL_NAME';\n      otherLabels: Label[];\n    }\n  | {\n      type: 'IN_LABEL_VALUE';\n      labelName: string;\n      betweenQuotes: boolean;\n      otherLabels: Label[];\n    };\n\nconst labelNameRegex = /[a-zA-Z_][a-zA-Z0-9_]*/;\nconst labelValueRegex = /[^\"]*/; // anything except a double quote\nconst labelPairsRegex = new RegExp(`(${labelNameRegex.source})=\"(${labelValueRegex.source})\"`, 'g');\nconst inLabelValueRegex = new RegExp(`(${labelNameRegex.source})=(\"?)${labelValueRegex.source}$`);\nconst inLabelNameRegex = new RegExp(/[{,]\\s*[a-zA-Z0-9_]*$/);\n\n/**\n * Figure out where is the cursor and what kind of suggestions are appropriate.\n * As currently Pyroscope handles just a simple {foo=\"bar\", baz=\"zyx\"} kind of values we can do with simple regex to figure\n * out where we are with the cursor.\n * @param text\n * @param offset\n */\nfunction getSituation(text: string, offset: number): Situation {\n  if (text === '') {\n    return {\n      type: 'EMPTY',\n    };\n  }\n\n  // Get all the labels so far in the query, so we can do some more filtering.\n  const matches = text.matchAll(labelPairsRegex);\n  const existingLabels = Array.from(matches).reduce<Label[]>((acc, match) => {\n    const [_, name, value] = match[1];\n    acc.push({ name, value });\n    return acc;\n  }, []);\n\n  // Check if we are editing a label value right now. If so also get name of the label\n  const matchLabelValue = text.substring(0, offset).match(inLabelValueRegex);\n  if (matchLabelValue) {\n    return {\n      type: 'IN_LABEL_VALUE',\n      labelName: matchLabelValue[1],\n      betweenQuotes: !!matchLabelValue[2],\n      otherLabels: existingLabels,\n    };\n  }\n\n  // Check if we are editing a label name\n  const matchLabelName = text.substring(0, offset).match(inLabelNameRegex);\n  if (matchLabelName) {\n    return {\n      type: 'IN_LABEL_NAME',\n      otherLabels: existingLabels,\n    };\n  }\n\n  // Will happen only if user writes something that isn't really a label selector\n  return {\n    type: 'UNKNOWN',\n  };\n}\n\nfunction getRangeAndOffset(monaco: Monaco, model: monacoTypes.editor.ITextModel, position: monacoTypes.Position) {\n  const word = model.getWordAtPosition(position);\n  const range =\n    word != null\n      ? monaco.Range.lift({\n          startLineNumber: position.lineNumber,\n          endLineNumber: position.lineNumber,\n          startColumn: word.startColumn,\n          endColumn: word.endColumn,\n        })\n      : monaco.Range.fromPositions(position);\n\n  // documentation says `position` will be \"adjusted\" in `getOffsetAt` so we clone it here just for sure.\n  const positionClone = {\n    column: position.column,\n    lineNumber: position.lineNumber,\n  };\n\n  const offset = model.getOffsetAt(positionClone);\n  return { offset, range };\n}\n","import { css } from '@emotion/css';\nimport { useEffect, useRef } from 'react';\nimport { useAsync, useLatest } from 'react-use';\n\nimport { CodeEditor, Monaco, useStyles2, monacoTypes } from '@grafana/ui';\n\nimport { languageDefinition } from '../pyroscopeql';\n\nimport { CompletionProvider } from './autocomplete';\n\ninterface Props {\n  value: string;\n  onChange: (val: string) => void;\n  onRunQuery: (value: string) => void;\n  labels?: string[];\n  getLabelValues: (label: string) => Promise<string[]>;\n}\n\nexport function LabelsEditor(props: Props) {\n  const setupAutocompleteFn = useAutocomplete(props.getLabelValues, props.labels);\n  const styles = useStyles2(getStyles);\n\n  const onRunQueryRef = useLatest(props.onRunQuery);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  return (\n    <div\n      className={styles.wrapper}\n      // NOTE: we will be setting inline-style-width/height on this element\n      ref={containerRef}\n    >\n      <CodeEditor\n        value={props.value}\n        language={langId}\n        onChange={props.onChange}\n        containerStyles={styles.queryField}\n        monacoOptions={{\n          folding: false,\n          fontSize: 14,\n          lineNumbers: 'off',\n          overviewRulerLanes: 0,\n          renderLineHighlight: 'none',\n          scrollbar: {\n            vertical: 'hidden',\n            verticalScrollbarSize: 8, // used as \"padding-right\"\n            horizontal: 'hidden',\n            horizontalScrollbarSize: 0,\n          },\n          scrollBeyondLastLine: false,\n          wordWrap: 'on',\n          padding: {\n            top: 4,\n            bottom: 5,\n          },\n        }}\n        onBeforeEditorMount={ensurePyroscopeQL}\n        onEditorDidMount={(editor, monaco) => {\n          setupAutocompleteFn(editor, monaco);\n\n          const updateElementHeight = () => {\n            const containerDiv = containerRef.current;\n            if (containerDiv !== null) {\n              const pixelHeight = editor.getContentHeight();\n              containerDiv.style.height = `${pixelHeight + EDITOR_HEIGHT_OFFSET}px`;\n              containerDiv.style.width = '100%';\n              const pixelWidth = containerDiv.clientWidth;\n              editor.layout({ width: pixelWidth, height: pixelHeight });\n            }\n          };\n\n          editor.onDidContentSizeChange(updateElementHeight);\n          updateElementHeight();\n\n          editor.addCommand(monaco.KeyMod.Shift | monaco.KeyCode.Enter, () => {\n            onRunQueryRef.current(editor.getValue());\n          });\n        }}\n      />\n    </div>\n  );\n}\n\n// this number was chosen by testing various values. it might be necessary\n// because of the width of the border, not sure.\n//it needs to do 2 things:\n// 1. when the editor is single-line, it should make the editor height be visually correct\n// 2. when the editor is multi-line, the editor should not be \"scrollable\" (meaning,\n//    you do a scroll-movement in the editor, and it will scroll the content by a couple pixels\n//    up & down. this we want to avoid)\nconst EDITOR_HEIGHT_OFFSET = 2;\n\n/**\n * Hook that returns function that will set up monaco autocomplete for the label selector\n */\nfunction useAutocomplete(getLabelValues: (label: string) => Promise<string[]>, labels?: string[]) {\n  const providerRef = useRef<CompletionProvider>();\n  if (providerRef.current === undefined) {\n    providerRef.current = new CompletionProvider();\n  }\n\n  useAsync(async () => {\n    if (providerRef.current) {\n      providerRef.current.init(labels || [], getLabelValues);\n    }\n  }, [labels, getLabelValues]);\n\n  const autocompleteDisposeFun = useRef<(() => void) | null>(null);\n  useEffect(() => {\n    // when we unmount, we unregister the autocomplete-function, if it was registered\n    return () => {\n      autocompleteDisposeFun.current?.();\n    };\n  }, []);\n\n  // This should be run in monaco onEditorDidMount\n  return (editor: monacoTypes.editor.IStandaloneCodeEditor, monaco: Monaco) => {\n    if (providerRef.current) {\n      providerRef.current.editor = editor;\n      providerRef.current.monaco = monaco;\n\n      const { dispose } = monaco.languages.registerCompletionItemProvider(langId, providerRef.current);\n      autocompleteDisposeFun.current = dispose;\n    }\n  };\n}\n\n// we must only run the setup code once\nlet pyroscopeqlSetupDone = false;\nconst langId = 'pyroscopeql';\n\nfunction ensurePyroscopeQL(monaco: Monaco) {\n  if (pyroscopeqlSetupDone === false) {\n    pyroscopeqlSetupDone = true;\n    const { aliases, extensions, mimetypes, def } = languageDefinition;\n    monaco.languages.register({ id: langId, aliases, extensions, mimetypes });\n    monaco.languages.setMonarchTokensProvider(langId, def.language);\n    monaco.languages.setLanguageConfiguration(langId, def.languageConfiguration);\n  }\n}\n\nconst getStyles = () => {\n  return {\n    queryField: css`\n      label: LabelsEditorQueryField;\n      flex: 1;\n      // Not exactly sure but without this the editor does not shrink after resizing (so you can make it bigger but not\n      // smaller). At the same time this does not actually make the editor 100px because it has flex 1 so I assume\n      // this should sort of act as a flex-basis (but flex-basis does not work for this). So yeah CSS magic.\n      width: 100px;\n    `,\n    wrapper: css`\n      label: LabelsEditorWrapper;\n      display: flex;\n      flex: 1;\n      border: 1px solid rgba(36, 41, 46, 0.3);\n      border-radius: 2px;\n    `,\n  };\n};\n","import { useEffect } from 'react';\nimport useAsyncFn from './useAsyncFn';\nexport default function useAsync(fn, deps) {\n    if (deps === void 0) { deps = []; }\n    var _a = useAsyncFn(fn, deps, {\n        loading: true,\n    }), state = _a[0], callback = _a[1];\n    useEffect(function () {\n        callback();\n    }, [callback]);\n    return state;\n}\n","import { __assign } from \"tslib\";\nimport { useCallback, useRef, useState } from 'react';\nimport useMountedState from './useMountedState';\nexport default function useAsyncFn(fn, deps, initialState) {\n    if (deps === void 0) { deps = []; }\n    if (initialState === void 0) { initialState = { loading: false }; }\n    var lastCallId = useRef(0);\n    var isMounted = useMountedState();\n    var _a = useState(initialState), state = _a[0], set = _a[1];\n    var callback = useCallback(function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var callId = ++lastCallId.current;\n        if (!state.loading) {\n            set(function (prevState) { return (__assign(__assign({}, prevState), { loading: true })); });\n        }\n        return fn.apply(void 0, args).then(function (value) {\n            isMounted() && callId === lastCallId.current && set({ value: value, loading: false });\n            return value;\n        }, function (error) {\n            isMounted() && callId === lastCallId.current && set({ error: error, loading: false });\n            return error;\n        });\n    }, deps);\n    return [state, callback];\n}\n","import { useCallback, useEffect, useRef } from 'react';\nexport default function useMountedState() {\n    var mountedRef = useRef(false);\n    var get = useCallback(function () { return mountedRef.current; }, []);\n    useEffect(function () {\n        mountedRef.current = true;\n        return function () {\n            mountedRef.current = false;\n        };\n    }, []);\n    return get;\n}\n","import { useRef } from 'react';\nvar useLatest = function (value) {\n    var ref = useRef(value);\n    ref.current = value;\n    return ref;\n};\nexport default useLatest;\n","import { css } from '@emotion/css';\nimport { ComponentProps } from 'react';\nimport * as React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Field, Icon, PopoverContent, ReactUtils, Tooltip, useStyles2 } from '@grafana/ui';\n\ninterface EditorFieldProps extends ComponentProps<typeof Field> {\n  label: string;\n  children: React.ReactElement;\n  width?: number | string;\n  optional?: boolean;\n  tooltip?: PopoverContent;\n}\n\nexport const EditorField = (props: EditorFieldProps) => {\n  const { label, optional, tooltip, children, width, ...fieldProps } = props;\n\n  const styles = useStyles2(getStyles, width);\n\n  // Null check for backward compatibility\n  const childInputId = fieldProps?.htmlFor || ReactUtils?.getChildId(children);\n\n  const labelEl = (\n    <>\n      <label className={styles.label} htmlFor={childInputId}>\n        {label}\n        {optional && <span className={styles.optional}> - optional</span>}\n        {tooltip && (\n          <Tooltip placement=\"top\" content={tooltip} theme=\"info\">\n            <Icon name=\"info-circle\" size=\"sm\" className={styles.icon} />\n          </Tooltip>\n        )}\n      </label>\n      <span className={styles.space} />\n    </>\n  );\n\n  return (\n    <div className={styles.root}>\n      <Field className={styles.field} label={labelEl} {...fieldProps}>\n        {children}\n      </Field>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2, width?: number | string) => ({\n  space: css({\n    paddingRight: theme.spacing(0),\n    paddingBottom: theme.spacing(0.5),\n  }),\n  root: css({\n    minWidth: theme.spacing(width ?? 0),\n  }),\n  label: css({\n    fontSize: 12,\n    fontWeight: theme.typography.fontWeightMedium,\n  }),\n  optional: css({\n    fontStyle: 'italic',\n    color: theme.colors.text.secondary,\n  }),\n  field: css({\n    marginBottom: 0, // GrafanaUI/Field has a bottom margin which we must remove\n  }),\n  icon: css({\n    color: theme.colors.text.secondary,\n    marginLeft: theme.spacing(1),\n    ':hover': {\n      color: theme.colors.text.primary,\n    },\n  }),\n});\n","import { useReducer } from 'react';\nvar toggleReducer = function (state, nextValue) {\n    return typeof nextValue === 'boolean' ? nextValue : !state;\n};\nvar useToggle = function (initialValue) {\n    return useReducer(toggleReducer, initialValue);\n};\nexport default useToggle;\n","import { css } from '@emotion/css';\nimport * as React from 'react';\nimport { useToggle } from 'react-use';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Collapse, useStyles2, Stack } from '@grafana/ui';\n\nexport interface Props {\n  title: string;\n  collapsedInfo: string[];\n  children: React.ReactNode;\n}\n\nexport function QueryOptionGroup({ title, children, collapsedInfo }: Props) {\n  const [isOpen, toggleOpen] = useToggle(false);\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.wrapper}>\n      <Collapse\n        className={styles.collapse}\n        collapsible\n        isOpen={isOpen}\n        onToggle={toggleOpen}\n        label={\n          <Stack gap={0}>\n            <h6 className={styles.title}>{title}</h6>\n            {!isOpen && (\n              <div className={styles.description}>\n                {collapsedInfo.map((x, i) => (\n                  <span key={i}>{x}</span>\n                ))}\n              </div>\n            )}\n          </Stack>\n        }\n      >\n        <div className={styles.body}>{children}</div>\n      </Collapse>\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    collapse: css({\n      backgroundColor: 'unset',\n      border: 'unset',\n      marginBottom: 0,\n\n      ['> button']: {\n        padding: theme.spacing(0, 1),\n      },\n    }),\n    wrapper: css({\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'baseline',\n    }),\n    title: css({\n      flexGrow: 1,\n      overflow: 'hidden',\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      margin: 0,\n    }),\n    description: css({\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontWeight: theme.typography.bodySmall.fontWeight,\n      paddingLeft: theme.spacing(2),\n      gap: theme.spacing(2),\n      display: 'flex',\n    }),\n    body: css({\n      display: 'flex',\n      gap: theme.spacing(2),\n      flexWrap: 'wrap',\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport * as React from 'react';\n\nimport { CoreApp, GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { useStyles2, RadioButtonGroup, MultiSelect, Input } from '@grafana/ui';\n\nimport { Query } from '../types';\n\nimport { EditorField } from './EditorField';\nimport { QueryOptionGroup } from './QueryOptionGroup';\nimport { Stack } from './Stack';\n\nexport interface Props {\n  query: Query;\n  onQueryChange: (query: Query) => void;\n  app?: CoreApp;\n  labels?: string[];\n}\n\nconst typeOptions: Array<{ value: Query['queryType']; label: string; description: string }> = [\n  { value: 'metrics', label: 'Metric', description: 'Return aggregated metrics' },\n  { value: 'profile', label: 'Profile', description: 'Return profile' },\n  { value: 'both', label: 'Both', description: 'Return both metric and profile data' },\n];\n\nfunction getTypeOptions(app?: CoreApp) {\n  if (app === CoreApp.Explore) {\n    return typeOptions;\n  }\n  return typeOptions.filter((option) => option.value !== 'both');\n}\n\n/**\n * Base on QueryOptionGroup component from grafana/ui but that is not available yet.\n */\nexport function QueryOptions({ query, onQueryChange, app, labels }: Props) {\n  const styles = useStyles2(getStyles);\n  const typeOptions = getTypeOptions(app);\n  const groupByOptions = labels\n    ? labels.map((l) => ({\n        label: l,\n        value: l,\n      }))\n    : [];\n\n  let collapsedInfo = [`Type: ${query.queryType}`];\n  if (query.groupBy?.length) {\n    collapsedInfo.push(`Group by: ${query.groupBy.join(', ')}`);\n  }\n  if (query.spanSelector?.length) {\n    collapsedInfo.push(`Span ID: ${query.spanSelector.join(', ')}`);\n  }\n  if (query.maxNodes) {\n    collapsedInfo.push(`Max nodes: ${query.maxNodes}`);\n  }\n\n  return (\n    <Stack gap={0} direction=\"column\">\n      <QueryOptionGroup title=\"Options\" collapsedInfo={collapsedInfo}>\n        <div className={styles.body}>\n          <EditorField label={'Query Type'}>\n            <RadioButtonGroup\n              options={typeOptions}\n              value={query.queryType}\n              onChange={(value) => onQueryChange({ ...query, queryType: value })}\n            />\n          </EditorField>\n          <EditorField\n            label={'Group by'}\n            tooltip={\n              <>\n                Used to group the metric result by a specific label or set of labels. Does not apply to profile query.\n              </>\n            }\n          >\n            <MultiSelect\n              placeholder=\"Label\"\n              value={query.groupBy}\n              allowCustomValue\n              options={groupByOptions}\n              onChange={(change) => {\n                const changes = change.map((c: SelectableValue<string>) => {\n                  return c.value!;\n                });\n                onQueryChange({ ...query, groupBy: changes });\n              }}\n            />\n          </EditorField>\n          <EditorField label={'Span ID'} tooltip={<>Sets the span ID from which to search for profiles.</>}>\n            <Input\n              value={query.spanSelector || ['']}\n              type=\"string\"\n              placeholder=\"64f170a95f537095\"\n              onChange={(event: React.SyntheticEvent<HTMLInputElement>) => {\n                onQueryChange({\n                  ...query,\n                  spanSelector: event.currentTarget.value !== '' ? [event.currentTarget.value] : [],\n                });\n              }}\n            />\n          </EditorField>\n          <EditorField label={'Max Nodes'} tooltip={<>Sets the maximum number of nodes to return in the flamegraph.</>}>\n            <Input\n              value={query.maxNodes || ''}\n              type=\"number\"\n              placeholder=\"16384\"\n              onChange={(event: React.SyntheticEvent<HTMLInputElement>) => {\n                let newValue = parseInt(event.currentTarget.value, 10);\n                newValue = isNaN(newValue) ? 0 : newValue;\n                onQueryChange({ ...query, maxNodes: newValue });\n              }}\n            />\n          </EditorField>\n        </div>\n      </QueryOptionGroup>\n    </Stack>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    switchLabel: css({\n      color: theme.colors.text.secondary,\n      cursor: 'pointer',\n      fontSize: theme.typography.bodySmall.fontSize,\n      '&:hover': {\n        color: theme.colors.text.primary,\n      },\n    }),\n    body: css({\n      display: 'flex',\n      paddingTop: theme.spacing(2),\n      gap: theme.spacing(2),\n      flexWrap: 'wrap',\n    }),\n  };\n};\n","import deepEqual from 'fast-deep-equal';\nimport { debounce } from 'lodash';\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { CoreApp, QueryEditorProps, TimeRange } from '@grafana/data';\nimport { LoadingPlaceholder } from '@grafana/ui';\n\nimport { normalizeQuery, PyroscopeDataSource } from '../datasource';\nimport { ProfileTypeMessage, PyroscopeDataSourceOptions, Query } from '../types';\n\nimport { EditorRow } from './EditorRow';\nimport { EditorRows } from './EditorRows';\nimport { LabelsEditor } from './LabelsEditor';\nimport { ProfileTypesCascader, useProfileTypes } from './ProfileTypesCascader';\nimport { QueryOptions } from './QueryOptions';\n\nexport type Props = QueryEditorProps<PyroscopeDataSource, Query, PyroscopeDataSourceOptions>;\n\nconst labelSelectorRegex = /(\\w+)\\s*=\\s*(\"[^,\"]+\")/g;\n\nexport function QueryEditor(props: Props) {\n  const { onChange, onRunQuery, datasource, query, range, app } = props;\n\n  function handleRunQuery(value: string) {\n    onChange({ ...query, labelSelector: value });\n    onRunQuery();\n  }\n\n  const onLabelSelectorChange = useLabelSelector(query, onChange);\n\n  const profileTypes = useProfileTypes(datasource, range);\n  const { labels, getLabelValues } = useLabels(range, datasource, query);\n  useNormalizeQuery(query, profileTypes, onChange, app);\n\n  let cascader = <LoadingPlaceholder text={'Loading'} />;\n\n  // The cascader is uncontrolled component so if we want to set some default value we can do it only on initial\n  // render, so we are waiting until we have the profileTypes and know what the default value should be before\n  // rendering.\n  if (profileTypes && query.profileTypeId !== undefined) {\n    cascader = (\n      <ProfileTypesCascader\n        placeholder={profileTypes.length === 0 ? 'No profile types found' : 'Select profile type'}\n        profileTypes={profileTypes}\n        initialProfileTypeId={query.profileTypeId}\n        onChange={(val) => {\n          onChange({ ...query, profileTypeId: val });\n        }}\n      />\n    );\n  }\n\n  return (\n    <EditorRows>\n      <EditorRow stackProps={{ wrap: false, gap: 1 }}>\n        {cascader}\n        <LabelsEditor\n          value={query.labelSelector}\n          onChange={onLabelSelectorChange}\n          onRunQuery={handleRunQuery}\n          labels={labels}\n          getLabelValues={getLabelValues}\n        />\n      </EditorRow>\n      <EditorRow>\n        <QueryOptions query={query} onQueryChange={props.onChange} app={props.app} labels={labels} />\n      </EditorRow>\n    </EditorRows>\n  );\n}\n\nfunction useNormalizeQuery(\n  query: Query,\n  profileTypes: ProfileTypeMessage[] | undefined,\n  onChange: (value: Query) => void,\n  app?: CoreApp\n) {\n  useEffect(() => {\n    if (!profileTypes) {\n      return;\n    }\n    const normalizedQuery = normalizeQuery(query, app);\n    // We just check if profileTypeId is filled but don't check if it's one of the existing cause it can be template\n    // variable\n    if (!query.profileTypeId) {\n      normalizedQuery.profileTypeId = defaultProfileType(profileTypes);\n    }\n    // Makes sure we don't have an infinite loop updates because the normalization creates a new object\n    if (!deepEqual(query, normalizedQuery)) {\n      onChange(normalizedQuery);\n    }\n  }, [app, query, profileTypes, onChange]);\n}\n\nfunction defaultProfileType(profileTypes: ProfileTypeMessage[]): string {\n  const cpuProfiles = profileTypes.filter((p) => p.id.indexOf('cpu') >= 0);\n  if (cpuProfiles.length) {\n    // Prefer cpu time profile if available instead of samples\n    const cpuTimeProfile = cpuProfiles.find((p) => p.id.indexOf('samples') === -1);\n    if (cpuTimeProfile) {\n      return cpuTimeProfile.id;\n    }\n    // Fallback to first cpu profile type\n    return cpuProfiles[0].id;\n  }\n\n  // Fallback to first profile type from response data\n  return profileTypes[0]?.id || '';\n}\n\nfunction useLabels(range: TimeRange | undefined, datasource: PyroscopeDataSource, query: Query) {\n  // Round to nearest 5 seconds. If the range is something like last 1h then every render the range values change slightly\n  // and what ever has range as dependency is rerun. So this effectively debounces the queries.\n  const unpreciseRange = {\n    to: Math.ceil((range?.to.valueOf() || 0) / 10000) * 10000,\n    from: Math.floor((range?.from.valueOf() || 0) / 10000) * 10000,\n  };\n\n  // Transforms user input into a valid label selector including the profile type.\n  // It can optionally remove a label, used to support editing existing label values.\n  const createSelector = (rawInput: string, profileTypeId: string, labelToRemove: string): string => {\n    let labels: string[] = [`__profile_type__=\\\"${profileTypeId}\\\"`];\n    let match;\n    while ((match = labelSelectorRegex.exec(rawInput)) !== null) {\n      if (match[1] && match[2]) {\n        if (match[1] === labelToRemove) {\n          continue;\n        }\n        labels.push(`${match[1]}=${match[2]}`);\n      }\n    }\n    return `{${labels.join(',')}}`;\n  };\n\n  const [labels, setLabels] = useState(() => ['']);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const labels = await datasource.getLabelNames(\n        createSelector(query.labelSelector, query.profileTypeId, ''),\n        unpreciseRange.from,\n        unpreciseRange.to\n      );\n\n      setLabels(labels);\n    };\n    fetchData();\n  }, [query, unpreciseRange.from, unpreciseRange.to, datasource, setLabels]);\n\n  // Create a function with range and query already baked in, so we don't have to send those everywhere\n  const getLabelValues = useCallback(\n    (label: string) => {\n      const labelSelector = createSelector(query.labelSelector, query.profileTypeId, label);\n      return datasource.getLabelValues(labelSelector, label, unpreciseRange.from, unpreciseRange.to);\n    },\n    [datasource, query.labelSelector, query.profileTypeId, unpreciseRange.to, unpreciseRange.from]\n  );\n\n  return { labels, getLabelValues };\n}\n\nfunction useLabelSelector(query: Query, onChange: (value: Query) => void) {\n  // Need to reference the query as otherwise when the label selector is changed, only the initial value\n  // of the query is passed into the LabelsEditor (onChange) which renders the CodeEditor for monaco.\n  // The above needs to have a ref to the query so it can get the latest value.\n  const queryRef = useRef(query);\n  queryRef.current = query;\n\n  const onChangeDebounced = debounce((value: string) => {\n    if (onChange) {\n      onChange({ ...queryRef.current, labelSelector: value });\n    }\n  }, 200);\n\n  const onLabelSelectorChange = useCallback(\n    (value: string) => {\n      onChangeDebounced(value);\n    },\n    [onChangeDebounced]\n  );\n\n  return onLabelSelectorChange;\n}\n","import { DataSourcePlugin } from '@grafana/data';\n\nimport { ConfigEditor } from './ConfigEditor';\nimport { QueryEditor } from './QueryEditor/QueryEditor';\nimport { PyroscopeDataSource } from './datasource';\nimport { Query, PyroscopeDataSourceOptions } from './types';\n\nexport const plugin = new DataSourcePlugin<PyroscopeDataSource, Query, PyroscopeDataSourceOptions>(PyroscopeDataSource)\n  .setConfigEditor(ConfigEditor)\n  .setQueryEditor(QueryEditor);\n"],"names":["module","exports","equal","a","b","constructor","length","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","f","k","Symbol","for","l","m","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","ref","__self","__source","q","c","g","d","e","h","defaultProps","$$typeof","type","props","_owner","current","Fragment","jsx","jsxs","__WEBPACK_EXTERNAL_MODULE__89__","__WEBPACK_EXTERNAL_MODULE__781__","__WEBPACK_EXTERNAL_MODULE__531__","__WEBPACK_EXTERNAL_MODULE__7__","__WEBPACK_EXTERNAL_MODULE__241__","__WEBPACK_EXTERNAL_MODULE__146__","__WEBPACK_EXTERNAL_MODULE__959__","__WEBPACK_EXTERNAL_MODULE__269__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","__esModule","definition","o","defineProperty","enumerable","get","obj","prop","r","toStringTag","value","__defProp","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","__propIsEnum","propertyIsEnumerable","__defNormalProp","configurable","writable","__spreadValues","DataSourceDescription","dataSourceName","docsLink","hasRequiredFields","className","theme","useTheme2","styles","container","css","margin","marginTop","spacing","text","typography","body","color","colors","secondary","link","textDecoration","cx","href","target","rel","GenericConfigSection","children","title","description","isCollapsible","isInitiallyOpen","kind","isOpen","setIsOpen","useState","iconName","isSubSection","collapsibleButtonAriaLabel","header","display","justifyContent","alignItems","subtitle","fontWeight","fontWeightRegular","descriptionText","marginBottom","bodySmall","content","IconButton","name","onClick","size","ConfigSection","_a","_b","exclude","indexOf","__objRest","ConnectionSettings","config","onChange","urlPlaceholder","urlTooltip","urlLabel","isValidUrl","test","url","maxWidth","InlineField","htmlFor","label","labelWidth","tooltip","grow","disabled","readOnly","required","invalid","error","interactive","Input","id","event","currentTarget","placeholder","useCommonStyles","inlineFieldNoMarginRight","marginRight","inlineFieldWithSecret","flexGrow","BasicAuth","user","passwordConfigured","userLabel","userTooltip","userPlaceholder","passwordLabel","passwordTooltip","passwordPlaceholder","onUserChange","onPasswordChange","onPasswordReset","commonStyles","lastInlineField","SecretInput","isConfigured","onReset","ConfigSubSection","AuthMethod","AuthMethod2","defaultOptions","CrossSiteCredentials","OAuthForward","NoAuth","AuthMethodSettings","selectedMethod","mostCommonMethod","visibleMethods","visibleMethodsFromProps","defaultOptionsOverrides","customMethods","onAuthMethodSelect","basicAuth","_c","_d","authMethodChanged","setAuthMethodChanged","useMemo","_a2","map","hasSelect","preparedOptions","customOptions","reduce","acc","method","preparedDefaultOptions","allOptions","filter","Boolean","option","selected","AuthFieldsComponent","startsWith","find","component","authMethods","padding","border","weak","selectedMethodFields","Select","options","TLSSettingsSection","enabled","tooltipText","onToggle","checkboxContainer","infoIcon","marginLeft","Checkbox","Tooltip","placement","Icon","SelfSignedCertificate","certificateConfigured","onCertificateChange","onCertificateReset","tooltips","newEnabled","certificateLabel","SecretTextArea","rows","TLSClientAuth","serverName","clientCertificateConfigured","clientKeyConfigured","onServerNameChange","onClientCertificateChange","onClientKeyChange","onClientCertificateReset","onClientKeyReset","serverNameLabel","keyLabel","SkipTLSVerification","TLSSettings","selfSignedCertificate","TLSClientAuth$1","skipTLSVerification","CustomHeader","onBlur","onDelete","input","minWidth","headerNameField","width","paddingRight","headerValueField","removeHeaderBtn","InlineFieldRow","configured","tooltipPlacement","CustomHeaders","headers","headersFromProps","setHeaders","uniqueId","useEffect","headers2","changed","newHeaders","addHeaderButton","header2","onHeaderChange","index","findIndex","splice","onHeaderDelete","Button","icon","variant","fill","Math","random","slice","Auth","TLS","customHeaders","headerNamePrefix","headerValuePrefix","convertLegacyAuthProps","getSelectedMethod","getOnAuthMethodSelectHandler","getBasicAuthProps","getTLSProps","getCustomHeaders","withCredentials","jsonData","oauthPassThru","basicAuthUser","secureJsonFields","basicAuthPassword","password","secureJsonData","tlsAuthWithCACert","tlsCACert","certificate","tlsAuth","tlsClientCert","tlsClientKey","clientCertificate","clientKey","tlsSkipVerify","sort","newJsonData","fromEntries","entries","newSecureJsonData","newSecureJsonFields","forEach","AdvancedHttpSettings","TagsInput","tags","keepCookies","cookies","min","timeout","parseInt","getStyles","ProfileTypesCascader","cascaderOptions","profileTypes","mainTypes","Map","profileType","parts","split","has","set","items","push","from","values","Cascader","separator","displayAllSelectedLevels","initialValue","initialProfileTypeId","allowCustomValue","onSelect","changeOnSelect","useProfileTypes","datasource","range","setProfileTypes","impreciseRange","to","ceil","floor","getProfileTypes","VariableQueryEditor","div","aria-label","refId","query","profileTypeId","ProfileTypeRow","val","LabelRow","labelName","Date","now","labels","setLabels","getLabelNames","getProfileTypeLabel","v","LoadingPlaceholder","VariableSupport","CustomVariableSupport","request","targets","this","dataAPI","pipe","data","of","getLabelValues","super","editor","extractLabelMatchers","tokens","labelMatchers","token","Token","labelKey","labelValue","labelOperator","contentTokens","currentToken","currentStr","getMaybeTokenStringContent","substring","labelComparator","FromPromLikeMap","operator","toPromLikeExpr","expr","selector","ToPromLikeMap","join","AbstractLabelOperator","Equal","NotEqual","EqualRegEx","NotEqualRegEx","invert","addLabelToQuery","Error","Prism","grammar","pattern","greedy","inside","comment","alias","punctuation","PyroscopeDataSource","DataSourceWithBackend","validTargets","t","labelSelector","normalizeQuery","app","start","end","getResource","getAllProfileTypes","templateSrv","replace","getTagKeys","adhocFilterData","getTagValues","timeRange","filters","applyTemplateVariables","scopedVars","importFromAbstractQueries","abstractQueries","abstractQuery","importFromAbstractQuery","labelBasedQuery","queryType","groupBy","exportToAbstractQueries","queries","exportToAbstractQuery","pyroscopeQuery","getDefaultQuery","defaultQuery","instanceSettings","getTemplateSrv","variables","spanSelector","defaultGrafanaPyroscopeDataQuery","normalized","CoreApp","Explore","Stack","useStyles2","root","flexDirection","direction","flexWrap","wrap","gap","EditorRow","stackProps","backgroundColor","background","borderRadius","shape","radius","default","EditorRows","__assign","assign","s","arguments","apply","create","SuppressedError","languageDefinition","extensions","aliases","mimetypes","def","language","ignoreCase","defaultToken","tokenPostfix","keywords","operators","symbols","escapes","digits","octaldigits","binarydigits","hexdigits","integersuffix","floatsuffix","tokenizer","include","cases","string_double","string_single","clauses","whitespace","languageConfiguration","wordPattern","brackets","autoClosingPairs","open","close","surroundingPairs","folding","CompletionProvider","init","provideCompletionItems","model","position","monaco","getModel","suggestions","offset","word","getWordAtPosition","Range","lift","startLineNumber","lineNumber","endLineNumber","startColumn","endColumn","fromPositions","positionClone","column","getOffsetAt","getRangeAndOffset","situation","matches","matchAll","labelPairsRegex","existingLabels","match","_","matchLabelValue","inLabelValueRegex","betweenQuotes","otherLabels","inLabelNameRegex","getSituation","getValue","getCompletions","then","completionItems","maxIndexDigits","item","getMonacoCompletionItemKind","insertText","sortText","padStart","triggerCharacters","Promise","resolve","languages","CompletionItemKind","Enum","EnumMember","labelNameRegex","labelValueRegex","LabelsEditor","setupAutocompleteFn","providerRef","useRef","fn","deps","initialState","loading","mountedRef","lastCallId","isMounted","useCallback","state","callback","args","_i","callId","prevState","useAsyncFn","useAsync","autocompleteDisposeFun","dispose","registerCompletionItemProvider","langId","useAutocomplete","onRunQueryRef","onRunQuery","containerRef","wrapper","CodeEditor","containerStyles","queryField","monacoOptions","fontSize","lineNumbers","overviewRulerLanes","renderLineHighlight","scrollbar","vertical","verticalScrollbarSize","horizontal","horizontalScrollbarSize","scrollBeyondLastLine","wordWrap","top","bottom","onBeforeEditorMount","ensurePyroscopeQL","onEditorDidMount","updateElementHeight","containerDiv","pixelHeight","getContentHeight","style","height","EDITOR_HEIGHT_OFFSET","pixelWidth","clientWidth","layout","onDidContentSizeChange","addCommand","KeyMod","Shift","KeyCode","Enter","pyroscopeqlSetupDone","register","setMonarchTokensProvider","setLanguageConfiguration","EditorField","optional","fieldProps","childInputId","ReactUtils","getChildId","labelEl","span","space","Field","field","paddingBottom","fontWeightMedium","fontStyle","primary","toggleReducer","nextValue","useReducer","QueryOptionGroup","collapsedInfo","toggleOpen","useToggle","Collapse","collapse","collapsible","h6","x","overflow","paddingLeft","typeOptions","getTypeOptions","QueryOptions","onQueryChange","groupByOptions","maxNodes","RadioButtonGroup","MultiSelect","change","changes","newValue","isNaN","switchLabel","cursor","paddingTop","labelSelectorRegex","plugin","DataSourcePlugin","setConfigEditor","onOptionsChange","Divider","secureSocksDSProxyEnabled","SecureSocksProxySettings","LegacyForms","FormField","inputEl","minStep","spellCheck","validationEvents","EventsWithValidation","regexValidation","setQueryEditor","onLabelSelectorChange","queryRef","onChangeDebounced","debounce","useLabelSelector","unpreciseRange","createSelector","rawInput","labelToRemove","exec","fetchData","useLabels","normalizedQuery","cpuProfiles","cpuTimeProfile","defaultProfileType","deepEqual","useNormalizeQuery","cascader"],"sourceRoot":""}